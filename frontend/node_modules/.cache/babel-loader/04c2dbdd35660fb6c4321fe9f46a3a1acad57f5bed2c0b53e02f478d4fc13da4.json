{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\iamaa\\\\Desktop\\\\library-management\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\n// src/App.js\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\n\n// --- Constants and Configuration ---\n\n// Number of books displayed per page\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BOOKS_PER_PAGE = 8;\n\n// Delay for simulating network requests (in milliseconds)\nconst API_SIMULATION_DELAY = 600;\n\n// Placeholder image URL for book covers\nconst PLACEHOLDER_COVER_URL = 'https://placehold.co/150x220/374151/e5e7eb?text=No+Cover';\n\n// --- Initial Data ---\n\n// Expanded list of initial books\nconst initialBooks = [{\n  id: 'b1',\n  title: \"The Great Gatsby\",\n  author: \"F. Scott Fitzgerald\",\n  coverUrl: \"https://m.media-amazon.com/images/I/71FTb9X6wsL._SL1500_.jpg\",\n  genre: \"Classic\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-01-10'\n}, {\n  id: 'b2',\n  title: \"To Kill a Mockingbird\",\n  author: \"Harper Lee\",\n  coverUrl: \"https://m.media-amazon.com/images/I/81aY1lxk+9L._SL1500_.jpg\",\n  genre: \"Classic\",\n  borrowedBy: 'aarush',\n  isPurchased: false,\n  addedDate: '2024-01-15'\n}, {\n  id: 'b3',\n  title: \"1984\",\n  author: \"George Orwell\",\n  coverUrl: \"https://m.media-amazon.com/images/I/71kxa1-0mfL._SL1500_.jpg\",\n  genre: \"Dystopian\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-01-20'\n}, {\n  id: 'b4',\n  title: \"Pride and Prejudice\",\n  author: \"Jane Austen\",\n  coverUrl: \"https://m.media-amazon.com/images/I/71Q1tPupKjL._SL1500_.jpg\",\n  genre: \"Romance\",\n  borrowedBy: null,\n  isPurchased: true,\n  addedDate: '2024-02-01'\n}, {\n  id: 'b5',\n  title: \"The Hobbit\",\n  author: \"J.R.R. Tolkien\",\n  coverUrl: \"https://m.media-amazon.com/images/I/710+HcoP38L._SL1500_.jpg\",\n  genre: \"Fantasy\",\n  borrowedBy: 'ishita',\n  isPurchased: false,\n  addedDate: '2024-02-05'\n}, {\n  id: 'b6',\n  title: \"The Catcher in the Rye\",\n  author: \"J.D. Salinger\",\n  coverUrl: \"https://m.media-amazon.com/images/I/8125BDk3l9L._SL1500_.jpg\",\n  genre: \"Fiction\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-02-10'\n}, {\n  id: 'b7',\n  title: \"Brave New World\",\n  author: \"Aldous Huxley\",\n  coverUrl: \"https://m.media-amazon.com/images/I/81zE42gT3xL._SL1500_.jpg\",\n  genre: \"Dystopian\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-02-15'\n}, {\n  id: 'b8',\n  title: \"Moby Dick\",\n  author: \"Herman Melville\",\n  coverUrl: \"https://m.media-amazon.com/images/I/81v5wp2zeQL._SL1500_.jpg\",\n  genre: \"Adventure\",\n  borrowedBy: 'havish',\n  isPurchased: false,\n  addedDate: '2024-02-20'\n}, {\n  id: 'b9',\n  title: \"War and Peace\",\n  author: \"Leo Tolstoy\",\n  coverUrl: \"https://m.media-amazon.com/images/I/713F+j9vVFL._SL1500_.jpg\",\n  genre: \"Historical Fiction\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-03-01'\n}, {\n  id: 'b10',\n  title: \"The Lord of the Rings\",\n  author: \"J.R.R. Tolkien\",\n  coverUrl: \"https://m.media-amazon.com/images/I/71jLBXtWJWL._SL1500_.jpg\",\n  genre: \"Fantasy\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-03-05'\n}, {\n  id: 'b11',\n  title: \"Don Quixote\",\n  author: \"Miguel de Cervantes\",\n  coverUrl: \"https://m.media-amazon.com/images/I/81zC06AbHFL._SL1500_.jpg\",\n  genre: \"Satire\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-03-10'\n}, {\n  id: 'b12',\n  title: \"Frankenstein\",\n  author: \"Mary Shelley\",\n  coverUrl: \"https://m.media-amazon.com/images/I/81tJ+5rWq+L._SL1500_.jpg\",\n  genre: \"Gothic Fiction\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-03-15'\n}, {\n  id: 'b13',\n  title: \"Alice's Adventures in Wonderland\",\n  author: \"Lewis Carroll\",\n  coverUrl: \"https://m.media-amazon.com/images/I/71xNREbP1+L._SL1500_.jpg\",\n  genre: \"Fantasy\",\n  borrowedBy: 'aarush',\n  isPurchased: false,\n  addedDate: '2024-03-20'\n}, {\n  id: 'b14',\n  title: \"The Odyssey\",\n  author: \"Homer\",\n  coverUrl: \"https://m.media-amazon.com/images/I/91dS2oNEI+L._SL1500_.jpg\",\n  genre: \"Epic Poetry\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-04-01'\n}, {\n  id: 'b15',\n  title: \"Crime and Punishment\",\n  author: \"Fyodor Dostoevsky\",\n  coverUrl: \"https://m.media-amazon.com/images/I/81N9XIAbRkL._SL1500_.jpg\",\n  genre: \"Philosophical Fiction\",\n  borrowedBy: null,\n  isPurchased: false,\n  addedDate: '2024-04-05'\n}];\n\n// Expanded list of hardcoded user credentials and details\nconst hardcodedCredentials = {\n  admin: {\n    password: '123456',\n    fullName: 'Administrator',\n    joinDate: '2023-01-01'\n  },\n  users: {\n    aarush: {\n      password: '123456',\n      fullName: 'Aarush Sharma',\n      joinDate: '2023-05-10',\n      purchaseHistory: ['b4']\n    },\n    ishita: {\n      password: '123456',\n      fullName: 'Ishita Patel',\n      joinDate: '2023-06-15',\n      purchaseHistory: []\n    },\n    havish: {\n      password: '123456',\n      fullName: 'Havish Singh',\n      joinDate: '2023-07-20',\n      purchaseHistory: []\n    },\n    priya: {\n      password: 'password',\n      fullName: 'Priya Kumar',\n      joinDate: '2024-01-05',\n      purchaseHistory: []\n    },\n    rohan: {\n      password: 'password123',\n      fullName: 'Rohan Gupta',\n      joinDate: '2024-02-12',\n      purchaseHistory: []\n    }\n  }\n};\n\n// --- Helper Functions ---\n\n/**\n * Simulates an asynchronous API call.\n * @param {Function} callback - The function to execute after the delay.\n * @param {number} [delay=API_SIMULATION_DELAY] - The simulation delay in ms.\n * @returns {Promise<any>} - A promise that resolves with the callback's result.\n */\nconst simulateApiCall = (callback, delay = API_SIMULATION_DELAY) => {\n  return new Promise(resolve => setTimeout(() => resolve(callback()), delay));\n};\n\n/**\n * Generates a unique ID (simple implementation for demo).\n * @returns {string} A pseudo-unique ID string.\n */\nconst generateId = () => `id_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n/**\n * Formats a date string (YYYY-MM-DD) into a more readable format.\n * @param {string} dateString - The date string in 'YYYY-MM-DD' format.\n * @returns {string} - Formatted date string (e.g., \"Jan 5, 2024\") or 'N/A'.\n */\nconst formatDate = dateString => {\n  if (!dateString) return 'N/A';\n  try {\n    const date = new Date(dateString);\n    // Adjust for potential timezone issues if needed, here assuming local time is fine\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  } catch (e) {\n    console.error(\"Error formatting date:\", dateString, e);\n    return 'Invalid Date';\n  }\n};\n\n// --- Utility Components ---\n\n/**\n * LoadingSpinner Component: Displays a simple loading indicator.\n */\nfunction LoadingSpinner() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center my-4\",\n    \"aria-label\": \"Loading content\",\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-400\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      fill: \"none\",\n      viewBox: \"0 0 24 24\",\n      children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n        className: \"opacity-25\",\n        cx: \"12\",\n        cy: \"12\",\n        r: \"10\",\n        stroke: \"currentColor\",\n        strokeWidth: \"4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        className: \"opacity-75\",\n        fill: \"currentColor\",\n        d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-indigo-300\",\n      children: \"Processing...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n/**\n * AlertMessage Component: Displays success or error messages.\n * @param {object} props - Component props.\n * @param {'success' | 'error' | 'info'} props.type - The type of message.\n * @param {string} props.message - The message text to display.\n * @param {Function} [props.onDismiss] - Optional callback to dismiss the message.\n */\n_c = LoadingSpinner;\nfunction AlertMessage({\n  type = 'info',\n  message,\n  onDismiss\n}) {\n  if (!message) return null;\n  const baseClasses = \"p-4 rounded-md my-4 text-sm shadow\";\n  const typeClasses = {\n    success: \"bg-green-900 border border-green-700 text-green-200\",\n    error: \"bg-red-900 border border-red-700 text-red-200\",\n    info: \"bg-blue-900 border border-blue-700 text-blue-200\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${baseClasses} ${typeClasses[type]}`,\n    role: \"alert\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), onDismiss && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onDismiss,\n        className: \"ml-4 text-lg font-bold leading-none hover:opacity-75\",\n        \"aria-label\": \"Dismiss alert\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n/**\n * PaginationControls Component: Renders pagination buttons.\n * @param {object} props - Component props.\n * @param {number} props.currentPage - The currently active page number.\n * @param {number} props.totalPages - The total number of pages.\n * @param {Function} props.onPageChange - Callback function when a page button is clicked.\n */\n_c2 = AlertMessage;\nfunction PaginationControls({\n  currentPage,\n  totalPages,\n  onPageChange\n}) {\n  if (totalPages <= 1) return null; // Don't render if only one page\n\n  const pageNumbers = [];\n  for (let i = 1; i <= totalPages; i++) {\n    pageNumbers.push(i);\n  }\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    \"aria-label\": \"Pagination\",\n    className: \"flex justify-center items-center space-x-2 my-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onPageChange(currentPage - 1),\n      disabled: currentPage === 1,\n      className: \"px-3 py-1 rounded-md bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-white transition-colors\",\n      \"aria-label\": \"Go to previous page\",\n      children: \"\\xAB Prev\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), pageNumbers.map(number => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onPageChange(number),\n      disabled: currentPage === number,\n      className: `px-3 py-1 rounded-md transition-colors ${currentPage === number ? 'bg-indigo-600 text-white font-bold cursor-default' : 'bg-gray-700 hover:bg-gray-600 text-white'}`,\n      \"aria-current\": currentPage === number ? 'page' : undefined,\n      children: number\n    }, number, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onPageChange(currentPage + 1),\n      disabled: currentPage === totalPages,\n      className: \"px-3 py-1 rounded-md bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-white transition-colors\",\n      \"aria-label\": \"Go to next page\",\n      children: \"Next \\xBB\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n}\n\n/**\n * SearchBar Component: Provides a search input field.\n * @param {object} props - Component props.\n * @param {Function} props.onSearch - Callback function triggered on search input change.\n * @param {string} props.placeholder - Placeholder text for the input.\n */\n_c3 = PaginationControls;\nfunction SearchBar({\n  onSearch,\n  placeholder = \"Search books...\"\n}) {\n  _s();\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Debounce search input to avoid excessive filtering on every keystroke\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      onSearch(searchTerm);\n    }, 300); // 300ms debounce delay\n\n    // Cleanup function to clear timeout if component unmounts or searchTerm changes\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [searchTerm, onSearch]); // Rerun effect if searchTerm or onSearch changes\n\n  const handleChange = event => {\n    setSearchTerm(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"my-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"search-books\",\n      className: \"sr-only\",\n      children: placeholder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"search\",\n      id: \"search-books\",\n      value: searchTerm,\n      onChange: handleChange,\n      placeholder: placeholder,\n      className: \"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n}\n\n// --- Core Application Components ---\n\n/**\n * LoginPage Component: Handles user and admin login.\n * @param {object} props - Component props.\n * @param {Function} props.onLogin - Callback function for successful login.\n * @param {Function} props.setLoginError - Function to set login-specific errors.\n * @param {boolean} props.isLoggingIn - Indicates if a login attempt is in progress.\n */\n_s(SearchBar, \"7rx4CbQaIs/5ckJbHkVuL5O30v0=\");\n_c4 = SearchBar;\nfunction LoginPage({\n  onLogin,\n  setLoginError,\n  isLoggingIn\n}) {\n  _s2();\n  // State for form inputs\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('user'); // Default role\n\n  /**\n   * Handles the form submission for login.\n   * @param {React.FormEvent} e - The form submission event.\n   */\n  const handleSubmit = async e => {\n    e.preventDefault(); // Prevent default browser form submission\n    setLoginError(''); // Clear any previous login errors\n\n    // Basic validation\n    if (!username || !password) {\n      setLoginError('Username and password are required.');\n      return;\n    }\n\n    // Call the onLogin prop (which handles the async logic and state update in App)\n    onLogin(username, password, role);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 bg-opacity-90 backdrop-filter backdrop-blur-sm p-8 rounded-xl shadow-2xl w-full max-w-md border border-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold mb-6 text-center text-indigo-400 tracking-wide\",\n        children: \"Library Portal Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4 relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username\",\n            className: \"block text-sm font-medium text-gray-300 mb-1\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"username\",\n            value: username,\n            onChange: e => setUsername(e.target.value),\n            required: true,\n            className: \"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white transition-colors\",\n            placeholder: \"e.g., aarush or admin\",\n            \"aria-describedby\": \"username-error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4 relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            className: \"block text-sm font-medium text-gray-300 mb-1\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            required: true,\n            className: \"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white transition-colors\",\n            placeholder: \"Enter password\",\n            \"aria-describedby\": \"password-error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"role\",\n            className: \"block text-sm font-medium text-gray-300 mb-1\",\n            children: \"Login As\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"role\",\n            value: role,\n            onChange: e => setRole(e.target.value),\n            className: \"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white appearance-none\" // appearance-none hides default dropdown arrow\n            ,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"user\",\n              children: \"User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"admin\",\n              children: \"Admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isLoggingIn // Disable button during login attempt\n          ,\n          className: \"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-800 disabled:cursor-wait text-white font-bold py-2.5 px-4 rounded-md transition duration-300 ease-in-out flex items-center justify-center\",\n          children: isLoggingIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                className: \"opacity-25\",\n                cx: \"12\",\n                cy: \"12\",\n                r: \"10\",\n                stroke: \"currentColor\",\n                strokeWidth: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                className: \"opacity-75\",\n                fill: \"currentColor\",\n                d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 17\n            }, this), \"Logging In...\"]\n          }, void 0, true) : 'Login'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 266,\n    columnNumber: 5\n  }, this);\n}\n\n/**\n * BookCard Component: Displays individual book information for users.\n * @param {object} props - Component props.\n * @param {object} props.book - The book data object.\n * @param {string} props.userRole - The role of the current user ('user' or 'admin').\n * @param {string} props.currentUsername - The username of the logged-in user.\n * @param {Function} props.onBorrow - Callback to borrow the book.\n * @param {Function} props.onReturn - Callback to return the book.\n * @param {Function} props.onPurchase - Callback to purchase the book.\n * @param {boolean} props.isProcessing - Indicates if an action on this card is in progress.\n */\n_s2(LoginPage, \"oE395+qC6SFam4kVLnd+RwBVjBU=\");\n_c5 = LoginPage;\nfunction BookCard({\n  book,\n  userRole,\n  currentUsername,\n  onBorrow,\n  onReturn,\n  onPurchase,\n  isProcessing\n}) {\n  // Determine the state of the book relative to the current user\n  const isBorrowedByCurrentUser = book.borrowedBy === currentUsername;\n  const isBorrowedByOther = book.borrowedBy && !isBorrowedByCurrentUser;\n  const isAvailable = !book.borrowedBy && !book.isPurchased;\n\n  // Determine which actions are possible for the current user\n  const canBorrow = userRole === 'user' && isAvailable;\n  const canReturn = userRole === 'user' && isBorrowedByCurrentUser;\n  const canPurchase = userRole === 'user' && !book.isPurchased; // Can purchase even if borrowed by someone else? Let's assume yes for now.\n\n  // Handle image loading errors\n  const handleImageError = e => {\n    e.target.onerror = null; // Prevent infinite loop if placeholder fails\n    e.target.src = PLACEHOLDER_COVER_URL;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 relative border border-gray-700 flex flex-col\n                       ${book.borrowedBy ? 'border-l-4 border-l-yellow-500' : ''}\n                       ${book.isPurchased ? 'opacity-70 grayscale-[50%]' : 'hover:shadow-indigo-500/30 hover:scale-[1.03]'}\n                       ${isProcessing ? 'animate-pulse' : ''}` // Add pulse animation when processing\n    ,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-2 right-2 flex flex-col space-y-1 z-10\",\n      children: [book.borrowedBy && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `text-xs font-bold px-2 py-0.5 rounded ${isBorrowedByCurrentUser ? 'bg-yellow-600' : 'bg-yellow-800'} text-white shadow`,\n        children: [\"Borrowed\", isBorrowedByOther ? ` by ${book.borrowedBy}` : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 11\n      }, this), book.isPurchased && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"bg-green-600 text-white text-xs font-bold px-2 py-0.5 rounded shadow\",\n        children: \"Purchased\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-64 w-full overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: book.coverUrl || PLACEHOLDER_COVER_URL,\n        alt: `Cover of ${book.title}`,\n        className: \"w-full h-full object-cover\",\n        onError: handleImageError,\n        loading: \"lazy\" // Lazy load images\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 flex flex-col flex-grow\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold mb-1 text-indigo-300 truncate\",\n        title: book.title,\n        children: book.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-400 text-sm mb-1 truncate\",\n        title: `by ${book.author}`,\n        children: [\"by \", book.author]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 text-xs mb-3 capitalize\",\n        children: book.genre\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-grow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 9\n      }, this), userRole === 'user' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col space-y-2 mt-auto pt-2 border-t border-gray-700\",\n        children: [canBorrow && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onBorrow(book.id),\n          disabled: isProcessing // Disable while processing\n          ,\n          className: \"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white text-sm font-semibold py-1.5 px-3 rounded transition duration-200 flex items-center justify-center\",\n          children: isProcessing ? /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 33\n          }, this) : 'Borrow'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 15\n        }, this), canReturn && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onReturn(book.id),\n          disabled: isProcessing,\n          className: \"w-full bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-800 text-white text-sm font-semibold py-1.5 px-3 rounded transition duration-200 flex items-center justify-center\",\n          children: isProcessing ? /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 33\n          }, this) : 'Return'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 15\n        }, this), canPurchase && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onPurchase(book.id),\n          disabled: isProcessing,\n          className: \"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white text-sm font-semibold py-1.5 px-3 rounded transition duration-200 flex items-center justify-center\",\n          children: isProcessing ? /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 33\n          }, this) : 'Purchase ($9.99)'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 15\n        }, this), !canBorrow && !canReturn && !canPurchase && !book.isPurchased && isBorrowedByOther && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-xs text-yellow-400 italic\",\n          children: [\"Currently borrowed by \", book.borrowedBy]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 15\n        }, this), book.isPurchased && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-xs text-green-400 italic\",\n          children: \"You own this book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 369,\n    columnNumber: 5\n  }, this);\n}\n\n/**\n * AdminBookList Component: Displays books in a table for administrators with actions.\n * @param {object} props - Component props.\n * @param {Array<object>} props.books - The list of books to display.\n * @param {Function} props.onEdit - Callback function when edit button is clicked.\n * @param {Function} props.onDelete - Callback function when delete button is clicked.\n * @param {string | null} props.processingBookId - ID of the book currently being processed (e.g., deleted).\n */\n_c6 = BookCard;\nfunction AdminBookList({\n  books,\n  onEdit,\n  onDelete,\n  processingBookId\n}) {\n  // Handle image loading errors\n  const handleImageError = e => {\n    e.target.onerror = null;\n    e.target.src = 'https://placehold.co/50x75/374151/e5e7eb?text=N/A';\n  };\n  if (!books || books.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-gray-400 my-6\",\n      children: \"No books found matching your criteria.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"overflow-x-auto shadow-md rounded-lg border border-gray-700\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"w-full text-sm text-left text-gray-400\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        className: \"text-xs uppercase bg-gray-700 text-gray-300 sticky top-0 z-10\",\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"px-4 py-3 w-16\",\n            children: \"Cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"px-6 py-3\",\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"px-6 py-3\",\n            children: \"Author\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"px-6 py-3\",\n            children: \"Genre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"px-6 py-3\",\n            children: \"Borrowed By\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"px-6 py-3\",\n            children: \"Purchased\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"px-6 py-3\",\n            children: \"Date Added\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"px-6 py-3\",\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: books.map(book => /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: `bg-gray-800 border-b border-gray-700 hover:bg-gray-600 transition-colors ${processingBookId === book.id ? 'opacity-50 animate-pulse' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-4 py-2\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: book.coverUrl || 'https://placehold.co/50x75/374151/e5e7eb?text=N/A',\n              alt: `Cover for ${book.title}`,\n              className: \"h-16 w-auto object-cover rounded\",\n              onError: handleImageError,\n              loading: \"lazy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"row\",\n            className: \"px-6 py-4 font-medium whitespace-nowrap text-white\",\n            children: book.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4\",\n            children: book.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4 capitalize\",\n            children: book.genre\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4\",\n            children: book.borrowedBy || /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-green-400 italic\",\n              children: \"Available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 61\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4\",\n            children: book.isPurchased ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-green-400\",\n              children: \"Yes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 61\n            }, this) : 'No'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4\",\n            children: formatDate(book.addedDate)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"px-6 py-4 whitespace-nowrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onEdit(book),\n              disabled: processingBookId === book.id // Disable if this book is being processed\n              ,\n              className: \"font-medium text-blue-500 hover:underline mr-4 disabled:text-gray-500 disabled:cursor-not-allowed\",\n              \"aria-label\": `Edit ${book.title}`,\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onDelete(book.id),\n              disabled: processingBookId === book.id,\n              className: \"font-medium text-red-500 hover:underline disabled:text-gray-500 disabled:cursor-not-allowed\",\n              \"aria-label\": `Delete ${book.title}`,\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 15\n          }, this)]\n        }, book.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 476,\n    columnNumber: 5\n  }, this);\n}\n\n/**\n * BookForm Component: Reusable form for adding/editing books inside dialogs.\n * @param {object} props - Component props.\n * @param {object} props.initialData - Initial data for form fields (used for editing).\n * @param {Function} props.onSubmit - Callback function when the form is submitted.\n * @param {string} props.submitButtonText - Text for the submit button.\n * @param {boolean} props.isSubmitting - Indicates if the form is currently being submitted.\n */\n_c7 = AdminBookList;\nfunction BookForm({\n  initialData,\n  onSubmit,\n  submitButtonText,\n  isSubmitting\n}) {\n  _s3();\n  // State to manage form field values\n  const [formData, setFormData] = useState({\n    title: '',\n    author: '',\n    coverUrl: '',\n    genre: '',\n    ...initialData // Spread initialData to pre-fill fields for editing\n  });\n  // State for form validation errors\n  const [errors, setErrors] = useState({});\n\n  // Update form data when initialData changes (for edit dialog)\n  useEffect(() => {\n    setFormData({\n      title: '',\n      author: '',\n      coverUrl: '',\n      genre: '',\n      ...initialData\n    });\n    setErrors({}); // Clear errors when data changes\n  }, [initialData]);\n\n  /**\n   * Handles changes in form input fields.\n   * @param {React.ChangeEvent<HTMLInputElement>} e - The input change event.\n   */\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    // Clear the error for this field when the user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: null\n      }));\n    }\n  };\n\n  /**\n   * Validates the form data.\n   * @returns {boolean} - True if the form is valid, false otherwise.\n   */\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.title.trim()) newErrors.title = 'Title is required.';\n    if (!formData.author.trim()) newErrors.author = 'Author is required.';\n    if (!formData.genre.trim()) newErrors.genre = 'Genre is required.';\n    // Basic URL validation (optional, can be more sophisticated)\n    if (formData.coverUrl.trim() && !/^https?:\\/\\/.+\\..+/.test(formData.coverUrl)) {\n      newErrors.coverUrl = 'Please enter a valid URL (e.g., http://...).';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0; // Return true if no errors\n  };\n\n  /**\n   * Handles the form submission.\n   * @param {React.FormEvent} e - The form submission event.\n   */\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (validateForm()) {\n      onSubmit(formData); // Call the onSubmit prop with the validated form data\n    }\n  };\n\n  // Reusable input style definition\n  const inputStyle = \"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white transition-colors\";\n  const errorStyle = \"border-red-500 ring-red-500\"; // Style for inputs with errors\n  const errorMessageStyle = \"text-red-400 text-xs mt-1\";\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    noValidate: true,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"book-title\",\n        className: \"block text-sm font-medium text-gray-300 mb-1\",\n        children: [\"Title \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-red-400\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 100\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"book-title\",\n        name: \"title\",\n        value: formData.title,\n        onChange: handleChange,\n        required: true,\n        className: `${inputStyle} ${errors.title ? errorStyle : ''}`,\n        \"aria-invalid\": !!errors.title,\n        \"aria-describedby\": \"title-error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 9\n      }, this), errors.title && /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"title-error\",\n        className: errorMessageStyle,\n        children: errors.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"book-author\",\n        className: \"block text-sm font-medium text-gray-300 mb-1\",\n        children: [\"Author \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-red-400\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 102\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"book-author\",\n        name: \"author\",\n        value: formData.author,\n        onChange: handleChange,\n        required: true,\n        className: `${inputStyle} ${errors.author ? errorStyle : ''}`,\n        \"aria-invalid\": !!errors.author,\n        \"aria-describedby\": \"author-error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 9\n      }, this), errors.author && /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"author-error\",\n        className: errorMessageStyle,\n        children: errors.author\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 626,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"book-coverUrl\",\n        className: \"block text-sm font-medium text-gray-300 mb-1\",\n        children: \"Cover URL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"book-coverUrl\",\n        name: \"coverUrl\",\n        value: formData.coverUrl,\n        onChange: handleChange,\n        placeholder: \"http://example.com/cover.jpg\",\n        className: `${inputStyle} ${errors.coverUrl ? errorStyle : ''}`,\n        \"aria-invalid\": !!errors.coverUrl,\n        \"aria-describedby\": \"coverUrl-error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 9\n      }, this), errors.coverUrl && /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"coverUrl-error\",\n        className: errorMessageStyle,\n        children: errors.coverUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"book-genre\",\n        className: \"block text-sm font-medium text-gray-300 mb-1\",\n        children: [\"Genre \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-red-400\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 100\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"book-genre\",\n        name: \"genre\",\n        value: formData.genre,\n        onChange: handleChange,\n        required: true,\n        className: `${inputStyle} ${errors.genre ? errorStyle : ''}`,\n        \"aria-invalid\": !!errors.genre,\n        \"aria-describedby\": \"genre-error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 9\n      }, this), errors.genre && /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"genre-error\",\n        className: errorMessageStyle,\n        children: errors.genre\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 638,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end mt-6\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: isSubmitting // Disable while submitting\n        ,\n        className: \"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-800 disabled:cursor-wait text-white font-semibold rounded-md shadow-md transition duration-200 flex items-center justify-center min-w-[120px]\" // min-width to prevent size change\n        ,\n        children: isSubmitting ? /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 27\n        }, this) : submitButtonText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 618,\n    columnNumber: 5\n  }, this);\n}\n\n/**\n * Modal Component: A reusable modal dialog wrapper.\n * @param {object} props - Component props.\n * @param {boolean} props.isOpen - Controls whether the modal is visible.\n * @param {Function} props.onClose - Callback function when the modal should be closed.\n * @param {string} props.title - The title displayed in the modal header.\n * @param {React.ReactNode} props.children - The content to be rendered inside the modal.\n */\n_s3(BookForm, \"o+qrY4pd6SsO6hJZyRw2ztpprdo=\");\n_c8 = BookForm;\nfunction Modal({\n  isOpen,\n  onClose,\n  title,\n  children\n}) {\n  _s4();\n  // Effect to handle closing modal on Escape key press\n  useEffect(() => {\n    const handleEsc = event => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n    if (isOpen) {\n      window.addEventListener('keydown', handleEsc);\n    }\n    // Cleanup listener on component unmount or when modal closes\n    return () => {\n      window.removeEventListener('keydown', handleEsc);\n    };\n  }, [isOpen, onClose]);\n  if (!isOpen) return null; // Don't render if not open\n\n  return (\n    /*#__PURE__*/\n    // Overlay covering the entire screen\n    _jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4 transition-opacity duration-300\",\n      onClick: onClose // Close modal if overlay is clicked\n      ,\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      \"aria-labelledby\": \"modal-title\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg text-white border border-gray-700 relative max-h-[90vh] overflow-y-auto\",\n        onClick: e => e.stopPropagation() // Prevent clicks inside the modal from closing it\n        ,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-4 pb-2 border-b border-gray-600\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            id: \"modal-title\",\n            className: \"text-2xl font-bold text-indigo-400\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"text-gray-400 hover:text-white text-2xl leading-none font-bold\",\n            \"aria-label\": \"Close modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 696,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 688,\n      columnNumber: 5\n    }, this)\n  );\n}\n\n/**\n * AddBookDialog Component: Modal dialog for adding a new book.\n * @param {object} props - Component props.\n * @param {boolean} props.isOpen - Controls visibility.\n * @param {Function} props.onClose - Callback to close the dialog.\n * @param {Function} props.onAddBook - Callback to handle adding the book.\n * @param {boolean} props.isSubmitting - Indicates if add operation is in progress.\n */\n_s4(Modal, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c9 = Modal;\nfunction AddBookDialog({\n  isOpen,\n  onClose,\n  onAddBook,\n  isSubmitting\n}) {\n  /**\n   * Handles the submission of the add book form.\n   * @param {object} formData - The validated form data from BookForm.\n   */\n  const handleAddSubmit = formData => {\n    const newBook = {\n      id: generateId(),\n      // Generate a unique ID\n      ...formData,\n      // Spread the form data (title, author, etc.)\n      borrowedBy: null,\n      // New books are not borrowed\n      isPurchased: false,\n      // New books are not purchased\n      addedDate: new Date().toISOString().split('T')[0] // Set added date to today\n    };\n    onAddBook(newBook); // Call the handler passed from App\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: \"Add New Book\",\n    children: /*#__PURE__*/_jsxDEV(BookForm, {\n      onSubmit: handleAddSubmit,\n      submitButtonText: \"Add Book\",\n      isSubmitting: isSubmitting\n      // initialData is empty for adding\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 746,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 745,\n    columnNumber: 5\n  }, this);\n}\n\n/**\n * EditBookDialog Component: Modal dialog for editing an existing book.\n * @param {object} props - Component props.\n * @param {boolean} props.isOpen - Controls visibility.\n * @param {Function} props.onClose - Callback to close the dialog.\n * @param {Function} props.onEditBook - Callback to handle editing the book.\n * @param {object | null} props.bookToEdit - The book object being edited.\n * @param {boolean} props.isSubmitting - Indicates if edit operation is in progress.\n */\n_c10 = AddBookDialog;\nfunction EditBookDialog({\n  isOpen,\n  onClose,\n  onEditBook,\n  bookToEdit,\n  isSubmitting\n}) {\n  /**\n  * Handles the submission of the edit book form.\n  * @param {object} formData - The validated form data from BookForm.\n  */\n  const handleEditSubmit = formData => {\n    if (!bookToEdit) return; // Should not happen if dialog is open correctly\n    // Merge existing book data (like id, borrowedBy, etc.) with updated form data\n    const updatedBook = {\n      ...bookToEdit,\n      ...formData // Overwrite with new title, author, etc.\n    };\n    onEditBook(updatedBook); // Call the handler passed from App\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen && !!bookToEdit,\n    onClose: onClose,\n    title: \"Edit Book Details\",\n    children: bookToEdit &&\n    /*#__PURE__*/\n    // Ensure bookToEdit exists before rendering form\n    _jsxDEV(BookForm, {\n      initialData: {\n        // Pass existing data to pre-fill the form\n        title: bookToEdit.title,\n        author: bookToEdit.author,\n        coverUrl: bookToEdit.coverUrl || '',\n        genre: bookToEdit.genre\n      },\n      onSubmit: handleEditSubmit,\n      submitButtonText: \"Save Changes\",\n      isSubmitting: isSubmitting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 783,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 781,\n    columnNumber: 5\n  }, this);\n}\n\n/**\n * AppHeader Component: Displays the application header and navigation.\n * @param {object} props - Component props.\n * @param {object} props.loggedInUser - The currently logged-in user object.\n * @param {Function} props.onLogout - Callback function for logging out.\n */\n_c11 = EditBookDialog;\nfunction AppHeader({\n  loggedInUser,\n  onLogout\n}) {\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"mb-8 p-4 bg-gray-800 rounded-lg shadow-md border border-gray-700\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col md:flex-row justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl md:text-3xl font-bold text-indigo-400 tracking-tight\",\n          children: \"Modern Library System\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 11\n        }, this), loggedInUser && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-400 text-sm mt-1\",\n          children: [\"Welcome, \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: loggedInUser.fullName || loggedInUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 816,\n            columnNumber: 24\n          }, this), \" (\", loggedInUser.role, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 815,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 810,\n        columnNumber: 9\n      }, this), loggedInUser && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onLogout,\n        className: \"mt-4 md:mt-0 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition duration-200 text-sm\",\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 822,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 808,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 807,\n    columnNumber: 5\n  }, this);\n}\n\n// --- Main App Component ---\n_c12 = AppHeader;\nfunction App() {\n  _s5();\n  // --- State Variables ---\n\n  // Authentication State\n  const [loggedInUser, setLoggedInUser] = useState(null); // Stores { username, role, fullName, ... } or null\n  const [isLoggingIn, setIsLoggingIn] = useState(false); // Loading state for login process\n  const [loginError, setLoginError] = useState(''); // Specific error messages for the login page\n\n  // Book Data State\n  const [allBooks, setAllBooks] = useState(initialBooks); // Master list of all books\n  const [filteredBooks, setFilteredBooks] = useState(initialBooks); // Books after applying search/filter\n\n  // UI State\n  const [globalLoading, setGlobalLoading] = useState(false); // General loading state for non-specific actions\n  const [globalMessage, setGlobalMessage] = useState({\n    type: '',\n    text: ''\n  }); // For global success/error messages { type: 'success' | 'error', text: '...' }\n  const [processingBookId, setProcessingBookId] = useState(null); // ID of book currently undergoing an action (borrow, return, delete etc.)\n\n  // Dialog State\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [showEditDialog, setShowEditDialog] = useState(false);\n  const [bookToEdit, setBookToEdit] = useState(null);\n  const [isDialogSubmitting, setIsDialogSubmitting] = useState(false); // Loading state for dialog form submissions\n\n  // Search and Pagination State\n  const [searchTerm, setSearchTerm] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n\n  // --- Derived State and Memos ---\n\n  // Memoize filtered books based on search term\n  const booksMatchingSearch = useMemo(() => {\n    if (!searchTerm) {\n      return allBooks; // Return all books if search term is empty\n    }\n    const lowerCaseSearchTerm = searchTerm.toLowerCase();\n    return allBooks.filter(book => book.title.toLowerCase().includes(lowerCaseSearchTerm) || book.author.toLowerCase().includes(lowerCaseSearchTerm) || book.genre.toLowerCase().includes(lowerCaseSearchTerm));\n  }, [allBooks, searchTerm]); // Recalculate only when allBooks or searchTerm changes\n\n  // Calculate pagination details based on filtered books\n  const totalPages = useMemo(() => {\n    return Math.ceil(booksMatchingSearch.length / BOOKS_PER_PAGE);\n  }, [booksMatchingSearch.length]); // Recalculate only when filtered book count changes\n\n  // Get the books to display on the current page\n  const paginatedBooks = useMemo(() => {\n    const startIndex = (currentPage - 1) * BOOKS_PER_PAGE;\n    const endIndex = startIndex + BOOKS_PER_PAGE;\n    return booksMatchingSearch.slice(startIndex, endIndex);\n  }, [booksMatchingSearch, currentPage]); // Recalculate when filtered books or current page changes\n\n  // --- Effects ---\n\n  // Effect to clear global message after a delay\n  useEffect(() => {\n    if (globalMessage.text) {\n      const timer = setTimeout(() => {\n        setGlobalMessage({\n          type: '',\n          text: ''\n        });\n      }, 4000); // Clear message after 4 seconds\n      return () => clearTimeout(timer); // Cleanup timer on unmount or if message changes\n    }\n  }, [globalMessage]);\n\n  // Effect to reset pagination when search term changes\n  useEffect(() => {\n    setCurrentPage(1); // Go back to first page on new search\n  }, [searchTerm]);\n\n  // Effect to reset pagination if the current page becomes invalid after deletion\n  useEffect(() => {\n    if (currentPage > totalPages && totalPages > 0) {\n      setCurrentPage(totalPages); // Go to last valid page\n    }\n    // If no books left on any page, reset to 1 (handles case where last item on last page is deleted)\n    if (totalPages === 0 && currentPage !== 1) {\n      setCurrentPage(1);\n    }\n  }, [totalPages, currentPage]);\n\n  // --- Utility Functions ---\n\n  /**\n   * Sets a global message (success or error).\n   * @param {'success' | 'error'} type - The type of message.\n   * @param {string} text - The message content.\n   */\n  const showGlobalMessage = (type, text) => {\n    setGlobalMessage({\n      type,\n      text\n    });\n  };\n\n  // --- Authentication Handlers ---\n\n  /**\n   * Handles the login attempt.\n   * @param {string} username - Entered username.\n   * @param {string} password - Entered password.\n   * @param {'user' | 'admin'} role - Selected role.\n   */\n  const handleLogin = useCallback(async (username, password, role) => {\n    setIsLoggingIn(true);\n    setLoginError(''); // Clear previous login errors\n\n    await simulateApiCall(() => {\n      let user = null;\n      if (role === 'admin') {\n        if (username === 'admin' && password === hardcodedCredentials.admin.password) {\n          user = {\n            username: 'admin',\n            role: 'admin',\n            ...hardcodedCredentials.admin\n          };\n        }\n      } else {\n        // Role is 'user'\n        const userData = hardcodedCredentials.users[username];\n        if (userData && userData.password === password) {\n          user = {\n            username,\n            role: 'user',\n            ...userData\n          };\n        }\n      }\n      if (user) {\n        setLoggedInUser(user);\n        showGlobalMessage('success', `Welcome back, ${user.fullName || user.username}!`);\n      } else {\n        setLoginError('Invalid username, password, or role.'); // Set specific login error\n      }\n    });\n    setIsLoggingIn(false);\n  }, []); // No dependencies, this function doesn't change\n\n  /** Handles user logout */\n  const handleLogout = useCallback(() => {\n    setLoggedInUser(null);\n    setSearchTerm(''); // Clear search on logout\n    setCurrentPage(1); // Reset page\n    showGlobalMessage('info', 'You have been logged out.');\n  }, []); // No dependencies\n\n  // --- Book Action Handlers (Admin) ---\n\n  /** Handles adding a new book */\n  const handleAddBook = useCallback(async newBook => {\n    setIsDialogSubmitting(true);\n    setGlobalLoading(true); // Indicate global loading as well\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks => [...prevBooks, newBook].sort((a, b) => a.title.localeCompare(b.title))); // Add and keep sorted\n      setShowAddDialog(false); // Close dialog\n      showGlobalMessage('success', `Book \"${newBook.title}\" added successfully.`);\n    });\n    setIsDialogSubmitting(false);\n    setGlobalLoading(false);\n  }, []);\n\n  /** Handles editing an existing book */\n  const handleEditBook = useCallback(async updatedBook => {\n    setIsDialogSubmitting(true);\n    setGlobalLoading(true);\n    setProcessingBookId(updatedBook.id); // Mark book as processing in the list\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks => prevBooks.map(book => book.id === updatedBook.id ? updatedBook : book).sort((a, b) => a.title.localeCompare(b.title)) // Keep sorted\n      );\n      setShowEditDialog(false); // Close dialog\n      setBookToEdit(null);\n      showGlobalMessage('success', `Book \"${updatedBook.title}\" updated successfully.`);\n    });\n    setIsDialogSubmitting(false);\n    setGlobalLoading(false);\n    setProcessingBookId(null); // Clear processing state\n  }, []);\n\n  /** Handles deleting a book */\n  const handleDeleteBook = useCallback(async bookId => {\n    // Find the book title for the confirmation message\n    const bookToDelete = allBooks.find(b => b.id === bookId);\n    if (!bookToDelete) return; // Should not happen\n\n    if (!window.confirm(`Are you sure you want to permanently delete \"${bookToDelete.title}\"?`)) {\n      return; // User cancelled\n    }\n    setGlobalLoading(true);\n    setProcessingBookId(bookId); // Mark book as processing\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks => prevBooks.filter(book => book.id !== bookId));\n      showGlobalMessage('success', `Book \"${bookToDelete.title}\" deleted successfully.`);\n      // Pagination will adjust automatically via useEffect dependency on totalPages\n    });\n    setGlobalLoading(false);\n    setProcessingBookId(null); // Clear processing state\n  }, [allBooks]); // Depends on allBooks to find the title\n\n  // --- Book Action Handlers (User) ---\n\n  /** Handles borrowing a book */\n  const handleBorrowBook = useCallback(async bookId => {\n    if (!loggedInUser || loggedInUser.role !== 'user') return;\n    const bookToBorrow = allBooks.find(b => b.id === bookId);\n    if (!bookToBorrow || bookToBorrow.borrowedBy || bookToBorrow.isPurchased) {\n      showGlobalMessage('error', 'Book cannot be borrowed at this time.');\n      return;\n    }\n    setGlobalLoading(true);\n    setProcessingBookId(bookId);\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks => prevBooks.map(book => book.id === bookId ? {\n        ...book,\n        borrowedBy: loggedInUser.username\n      } : book));\n      showGlobalMessage('success', `You have borrowed \"${bookToBorrow.title}\".`);\n    });\n    setGlobalLoading(false);\n    setProcessingBookId(null);\n  }, [loggedInUser, allBooks]); // Depends on loggedInUser and allBooks\n\n  /** Handles returning a book */\n  const handleReturnBook = useCallback(async bookId => {\n    if (!loggedInUser || loggedInUser.role !== 'user') return;\n    const bookToReturn = allBooks.find(b => b.id === bookId);\n    if (!bookToReturn || bookToReturn.borrowedBy !== loggedInUser.username) {\n      showGlobalMessage('error', 'You cannot return this book.');\n      return;\n    }\n    setGlobalLoading(true);\n    setProcessingBookId(bookId);\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks => prevBooks.map(book => book.id === bookId ? {\n        ...book,\n        borrowedBy: null\n      } : book));\n      showGlobalMessage('success', `You have returned \"${bookToReturn.title}\".`);\n    });\n    setGlobalLoading(false);\n    setProcessingBookId(null);\n  }, [loggedInUser, allBooks]);\n\n  /** Handles purchasing a book */\n  const handlePurchaseBook = useCallback(async bookId => {\n    if (!loggedInUser || loggedInUser.role !== 'user') return;\n    const bookToPurchase = allBooks.find(b => b.id === bookId);\n    if (!bookToPurchase || bookToPurchase.isPurchased) {\n      showGlobalMessage('error', 'This book cannot be purchased.');\n      return;\n    }\n    if (!window.confirm(`Confirm purchase of \"${bookToPurchase.title}\" for $9.99? This action cannot be undone.`)) {\n      return; // User cancelled\n    }\n    setGlobalLoading(true);\n    setProcessingBookId(bookId);\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks => prevBooks.map(book => book.id === bookId ? {\n        ...book,\n        isPurchased: true,\n        borrowedBy: null\n      } : book // Mark as purchased, ensure not borrowed\n      ));\n      showGlobalMessage('success', `You have purchased \"${bookToPurchase.title}\". Thank you!`);\n      // Note: In a real app, you'd update the user's purchase history here too.\n      // This example keeps it simple by only modifying the book state.\n    });\n    setGlobalLoading(false);\n    setProcessingBookId(null);\n  }, [loggedInUser, allBooks]);\n\n  // --- Dialog Open/Close Handlers ---\n  const openAddDialog = useCallback(() => setShowAddDialog(true), []);\n  const closeAddDialog = useCallback(() => setShowAddDialog(false), []);\n  const openEditDialog = useCallback(book => {\n    setBookToEdit(book);\n    setShowEditDialog(true);\n  }, []);\n  const closeEditDialog = useCallback(() => {\n    setShowEditDialog(false);\n    // Delay clearing bookToEdit slightly to prevent content flicker during closing animation\n    setTimeout(() => setBookToEdit(null), 300);\n  }, []);\n\n  // --- Search Handler ---\n  const handleSearch = useCallback(query => {\n    setSearchTerm(query);\n  }, []); // Doesn't change\n\n  // --- Pagination Handler ---\n  const handlePageChange = useCallback(pageNumber => {\n    // Ensure page number is within valid range\n    if (pageNumber >= 1 && pageNumber <= totalPages) {\n      setCurrentPage(pageNumber);\n      window.scrollTo(0, 0); // Scroll to top on page change\n    }\n  }, [totalPages]); // Depends on totalPages\n\n  // --- Render Logic ---\n\n  // Render Login Page if not logged in\n  if (!loggedInUser) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(LoginPage, {\n        onLogin: handleLogin,\n        setLoginError: setLoginError // Pass setter for login-specific errors\n        ,\n        isLoggingIn: isLoggingIn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1141,\n        columnNumber: 9\n      }, this), loginError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed bottom-4 right-4 z-50\",\n        children: /*#__PURE__*/_jsxDEV(AlertMessage, {\n          type: \"error\",\n          message: loginError,\n          onDismiss: () => setLoginError('')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1149,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1148,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n  // Render Main Application View if logged in\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white p-4 md:p-8 relative\",\n    children: [/*#__PURE__*/_jsxDEV(AppHeader, {\n      loggedInUser: loggedInUser,\n      onLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1160,\n      columnNumber: 7\n    }, this), globalLoading && !isDialogSubmitting && /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1163,\n      columnNumber: 48\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed top-4 right-4 z-[100]\",\n      children: /*#__PURE__*/_jsxDEV(AlertMessage, {\n        type: globalMessage.type,\n        message: globalMessage.text,\n        onDismiss: () => setGlobalMessage({\n          type: '',\n          text: ''\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1167,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"mt-6\",\n      children: [loggedInUser.role === 'admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 flex flex-col md:flex-row justify-between items-center gap-4 p-4 bg-gray-800 rounded-lg border border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-indigo-300\",\n          children: \"Admin Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1181,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: openAddDialog,\n          className: \"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md shadow-md transition duration-200 text-sm w-full md:w-auto\",\n          children: \"+ Add New Book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1180,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n        onSearch: handleSearch,\n        placeholder: loggedInUser.role === 'admin' ? \"Search by title, author, genre...\" : \"Search available books...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1192,\n        columnNumber: 9\n      }, this), loggedInUser.role === 'admin' ?\n      /*#__PURE__*/\n      // Admin View: Table\n      _jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(AdminBookList, {\n          books: paginatedBooks // Display paginated books\n          ,\n          onEdit: openEditDialog,\n          onDelete: handleDeleteBook,\n          processingBookId: processingBookId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1199,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(PaginationControls, {\n          currentPage: currentPage,\n          totalPages: totalPages,\n          onPageChange: handlePageChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1205,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1198,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      // User View: Grid of Cards\n      _jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\",\n          children: paginatedBooks.length > 0 ? paginatedBooks.map(book => /*#__PURE__*/_jsxDEV(BookCard, {\n            book: book,\n            userRole: loggedInUser.role,\n            currentUsername: loggedInUser.username,\n            onBorrow: handleBorrowBook,\n            onReturn: handleReturnBook,\n            onPurchase: handlePurchaseBook,\n            isProcessing: processingBookId === book.id // Pass processing state\n          }, book.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1217,\n            columnNumber: 19\n          }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-gray-400 col-span-full my-6\",\n            children: searchTerm ? 'No books match your search.' : 'No books available at the moment.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1229,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1214,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(PaginationControls, {\n          currentPage: currentPage,\n          totalPages: totalPages,\n          onPageChange: handlePageChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1234,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"text-center text-gray-500 text-xs mt-12 border-t border-gray-700 pt-4\",\n      children: [\"Library Management System \\xA9 \", new Date().getFullYear()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1244,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddBookDialog, {\n      isOpen: showAddDialog,\n      onClose: closeAddDialog,\n      onAddBook: handleAddBook,\n      isSubmitting: isDialogSubmitting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditBookDialog, {\n      isOpen: showEditDialog,\n      onClose: closeEditDialog,\n      onEditBook: handleEditBook,\n      bookToEdit: bookToEdit,\n      isSubmitting: isDialogSubmitting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1255,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1158,\n    columnNumber: 5\n  }, this);\n}\n_s5(App, \"Y9hgqn7c99nlhE2ruE3SQLlBs0M=\");\n_c13 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13;\n$RefreshReg$(_c, \"LoadingSpinner\");\n$RefreshReg$(_c2, \"AlertMessage\");\n$RefreshReg$(_c3, \"PaginationControls\");\n$RefreshReg$(_c4, \"SearchBar\");\n$RefreshReg$(_c5, \"LoginPage\");\n$RefreshReg$(_c6, \"BookCard\");\n$RefreshReg$(_c7, \"AdminBookList\");\n$RefreshReg$(_c8, \"BookForm\");\n$RefreshReg$(_c9, \"Modal\");\n$RefreshReg$(_c10, \"AddBookDialog\");\n$RefreshReg$(_c11, \"EditBookDialog\");\n$RefreshReg$(_c12, \"AppHeader\");\n$RefreshReg$(_c13, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","jsxDEV","_jsxDEV","Fragment","_Fragment","BOOKS_PER_PAGE","API_SIMULATION_DELAY","PLACEHOLDER_COVER_URL","initialBooks","id","title","author","coverUrl","genre","borrowedBy","isPurchased","addedDate","hardcodedCredentials","admin","password","fullName","joinDate","users","aarush","purchaseHistory","ishita","havish","priya","rohan","simulateApiCall","callback","delay","Promise","resolve","setTimeout","generateId","Date","now","Math","random","toString","substr","formatDate","dateString","date","toLocaleDateString","year","month","day","e","console","error","LoadingSpinner","className","children","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","d","_c","AlertMessage","type","message","onDismiss","baseClasses","typeClasses","success","info","role","onClick","_c2","PaginationControls","currentPage","totalPages","onPageChange","pageNumbers","i","push","disabled","map","number","undefined","_c3","SearchBar","onSearch","placeholder","_s","searchTerm","setSearchTerm","handler","clearTimeout","handleChange","event","target","value","htmlFor","onChange","_c4","LoginPage","onLogin","setLoginError","isLoggingIn","_s2","username","setUsername","setPassword","setRole","handleSubmit","preventDefault","onSubmit","noValidate","required","_c5","BookCard","book","userRole","currentUsername","onBorrow","onReturn","onPurchase","isProcessing","isBorrowedByCurrentUser","isBorrowedByOther","isAvailable","canBorrow","canReturn","canPurchase","handleImageError","onerror","src","alt","onError","loading","_c6","AdminBookList","books","onEdit","onDelete","processingBookId","length","scope","_c7","BookForm","initialData","submitButtonText","isSubmitting","_s3","formData","setFormData","errors","setErrors","name","prev","validateForm","newErrors","trim","test","Object","keys","inputStyle","errorStyle","errorMessageStyle","_c8","Modal","isOpen","onClose","_s4","handleEsc","key","window","addEventListener","removeEventListener","stopPropagation","_c9","AddBookDialog","onAddBook","handleAddSubmit","newBook","toISOString","split","_c10","EditBookDialog","onEditBook","bookToEdit","handleEditSubmit","updatedBook","_c11","AppHeader","loggedInUser","onLogout","_c12","App","_s5","setLoggedInUser","setIsLoggingIn","loginError","allBooks","setAllBooks","filteredBooks","setFilteredBooks","globalLoading","setGlobalLoading","globalMessage","setGlobalMessage","text","setProcessingBookId","showAddDialog","setShowAddDialog","showEditDialog","setShowEditDialog","setBookToEdit","isDialogSubmitting","setIsDialogSubmitting","setCurrentPage","booksMatchingSearch","lowerCaseSearchTerm","toLowerCase","filter","includes","ceil","paginatedBooks","startIndex","endIndex","slice","timer","showGlobalMessage","handleLogin","user","userData","handleLogout","handleAddBook","prevBooks","sort","a","b","localeCompare","handleEditBook","handleDeleteBook","bookId","bookToDelete","find","confirm","handleBorrowBook","bookToBorrow","handleReturnBook","bookToReturn","handlePurchaseBook","bookToPurchase","openAddDialog","closeAddDialog","openEditDialog","closeEditDialog","handleSearch","query","handlePageChange","pageNumber","scrollTo","getFullYear","_c13","$RefreshReg$"],"sources":["C:/Users/iamaa/Desktop/library-management/frontend/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\n\n// --- Constants and Configuration ---\n\n// Number of books displayed per page\nconst BOOKS_PER_PAGE = 8;\n\n// Delay for simulating network requests (in milliseconds)\nconst API_SIMULATION_DELAY = 600;\n\n// Placeholder image URL for book covers\nconst PLACEHOLDER_COVER_URL = 'https://placehold.co/150x220/374151/e5e7eb?text=No+Cover';\n\n// --- Initial Data ---\n\n// Expanded list of initial books\nconst initialBooks = [\n  { id: 'b1', title: \"The Great Gatsby\", author: \"F. Scott Fitzgerald\", coverUrl: \"https://m.media-amazon.com/images/I/71FTb9X6wsL._SL1500_.jpg\", genre: \"Classic\", borrowedBy: null, isPurchased: false, addedDate: '2024-01-10' },\n  { id: 'b2', title: \"To Kill a Mockingbird\", author: \"Harper Lee\", coverUrl: \"https://m.media-amazon.com/images/I/81aY1lxk+9L._SL1500_.jpg\", genre: \"Classic\", borrowedBy: 'aarush', isPurchased: false, addedDate: '2024-01-15' },\n  { id: 'b3', title: \"1984\", author: \"George Orwell\", coverUrl: \"https://m.media-amazon.com/images/I/71kxa1-0mfL._SL1500_.jpg\", genre: \"Dystopian\", borrowedBy: null, isPurchased: false, addedDate: '2024-01-20' },\n  { id: 'b4', title: \"Pride and Prejudice\", author: \"Jane Austen\", coverUrl: \"https://m.media-amazon.com/images/I/71Q1tPupKjL._SL1500_.jpg\", genre: \"Romance\", borrowedBy: null, isPurchased: true, addedDate: '2024-02-01' },\n  { id: 'b5', title: \"The Hobbit\", author: \"J.R.R. Tolkien\", coverUrl: \"https://m.media-amazon.com/images/I/710+HcoP38L._SL1500_.jpg\", genre: \"Fantasy\", borrowedBy: 'ishita', isPurchased: false, addedDate: '2024-02-05' },\n  { id: 'b6', title: \"The Catcher in the Rye\", author: \"J.D. Salinger\", coverUrl: \"https://m.media-amazon.com/images/I/8125BDk3l9L._SL1500_.jpg\", genre: \"Fiction\", borrowedBy: null, isPurchased: false, addedDate: '2024-02-10' },\n  { id: 'b7', title: \"Brave New World\", author: \"Aldous Huxley\", coverUrl: \"https://m.media-amazon.com/images/I/81zE42gT3xL._SL1500_.jpg\", genre: \"Dystopian\", borrowedBy: null, isPurchased: false, addedDate: '2024-02-15' },\n  { id: 'b8', title: \"Moby Dick\", author: \"Herman Melville\", coverUrl: \"https://m.media-amazon.com/images/I/81v5wp2zeQL._SL1500_.jpg\", genre: \"Adventure\", borrowedBy: 'havish', isPurchased: false, addedDate: '2024-02-20' },\n  { id: 'b9', title: \"War and Peace\", author: \"Leo Tolstoy\", coverUrl: \"https://m.media-amazon.com/images/I/713F+j9vVFL._SL1500_.jpg\", genre: \"Historical Fiction\", borrowedBy: null, isPurchased: false, addedDate: '2024-03-01' },\n  { id: 'b10', title: \"The Lord of the Rings\", author: \"J.R.R. Tolkien\", coverUrl: \"https://m.media-amazon.com/images/I/71jLBXtWJWL._SL1500_.jpg\", genre: \"Fantasy\", borrowedBy: null, isPurchased: false, addedDate: '2024-03-05' },\n  { id: 'b11', title: \"Don Quixote\", author: \"Miguel de Cervantes\", coverUrl: \"https://m.media-amazon.com/images/I/81zC06AbHFL._SL1500_.jpg\", genre: \"Satire\", borrowedBy: null, isPurchased: false, addedDate: '2024-03-10' },\n  { id: 'b12', title: \"Frankenstein\", author: \"Mary Shelley\", coverUrl: \"https://m.media-amazon.com/images/I/81tJ+5rWq+L._SL1500_.jpg\", genre: \"Gothic Fiction\", borrowedBy: null, isPurchased: false, addedDate: '2024-03-15' },\n  { id: 'b13', title: \"Alice's Adventures in Wonderland\", author: \"Lewis Carroll\", coverUrl: \"https://m.media-amazon.com/images/I/71xNREbP1+L._SL1500_.jpg\", genre: \"Fantasy\", borrowedBy: 'aarush', isPurchased: false, addedDate: '2024-03-20' },\n  { id: 'b14', title: \"The Odyssey\", author: \"Homer\", coverUrl: \"https://m.media-amazon.com/images/I/91dS2oNEI+L._SL1500_.jpg\", genre: \"Epic Poetry\", borrowedBy: null, isPurchased: false, addedDate: '2024-04-01' },\n  { id: 'b15', title: \"Crime and Punishment\", author: \"Fyodor Dostoevsky\", coverUrl: \"https://m.media-amazon.com/images/I/81N9XIAbRkL._SL1500_.jpg\", genre: \"Philosophical Fiction\", borrowedBy: null, isPurchased: false, addedDate: '2024-04-05' },\n];\n\n// Expanded list of hardcoded user credentials and details\nconst hardcodedCredentials = {\n  admin: { password: '123456', fullName: 'Administrator', joinDate: '2023-01-01' },\n  users: {\n    aarush: { password: '123456', fullName: 'Aarush Sharma', joinDate: '2023-05-10', purchaseHistory: ['b4'] },\n    ishita: { password: '123456', fullName: 'Ishita Patel', joinDate: '2023-06-15', purchaseHistory: [] },\n    havish: { password: '123456', fullName: 'Havish Singh', joinDate: '2023-07-20', purchaseHistory: [] },\n    priya: { password: 'password', fullName: 'Priya Kumar', joinDate: '2024-01-05', purchaseHistory: [] },\n    rohan: { password: 'password123', fullName: 'Rohan Gupta', joinDate: '2024-02-12', purchaseHistory: [] },\n  },\n};\n\n// --- Helper Functions ---\n\n/**\n * Simulates an asynchronous API call.\n * @param {Function} callback - The function to execute after the delay.\n * @param {number} [delay=API_SIMULATION_DELAY] - The simulation delay in ms.\n * @returns {Promise<any>} - A promise that resolves with the callback's result.\n */\nconst simulateApiCall = (callback, delay = API_SIMULATION_DELAY) => {\n  return new Promise(resolve => setTimeout(() => resolve(callback()), delay));\n};\n\n/**\n * Generates a unique ID (simple implementation for demo).\n * @returns {string} A pseudo-unique ID string.\n */\nconst generateId = () => `id_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n/**\n * Formats a date string (YYYY-MM-DD) into a more readable format.\n * @param {string} dateString - The date string in 'YYYY-MM-DD' format.\n * @returns {string} - Formatted date string (e.g., \"Jan 5, 2024\") or 'N/A'.\n */\nconst formatDate = (dateString) => {\n  if (!dateString) return 'N/A';\n  try {\n    const date = new Date(dateString);\n    // Adjust for potential timezone issues if needed, here assuming local time is fine\n    return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });\n  } catch (e) {\n    console.error(\"Error formatting date:\", dateString, e);\n    return 'Invalid Date';\n  }\n};\n\n// --- Utility Components ---\n\n/**\n * LoadingSpinner Component: Displays a simple loading indicator.\n */\nfunction LoadingSpinner() {\n  return (\n    <div className=\"flex justify-center items-center my-4\" aria-label=\"Loading content\">\n      <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n      </svg>\n      <span className=\"text-indigo-300\">Processing...</span>\n    </div>\n  );\n}\n\n/**\n * AlertMessage Component: Displays success or error messages.\n * @param {object} props - Component props.\n * @param {'success' | 'error' | 'info'} props.type - The type of message.\n * @param {string} props.message - The message text to display.\n * @param {Function} [props.onDismiss] - Optional callback to dismiss the message.\n */\nfunction AlertMessage({ type = 'info', message, onDismiss }) {\n  if (!message) return null;\n\n  const baseClasses = \"p-4 rounded-md my-4 text-sm shadow\";\n  const typeClasses = {\n    success: \"bg-green-900 border border-green-700 text-green-200\",\n    error: \"bg-red-900 border border-red-700 text-red-200\",\n    info: \"bg-blue-900 border border-blue-700 text-blue-200\",\n  };\n\n  return (\n    <div className={`${baseClasses} ${typeClasses[type]}`} role=\"alert\">\n      <div className=\"flex justify-between items-center\">\n        <span>{message}</span>\n        {onDismiss && (\n          <button\n            onClick={onDismiss}\n            className=\"ml-4 text-lg font-bold leading-none hover:opacity-75\"\n            aria-label=\"Dismiss alert\"\n          >\n            &times;\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * PaginationControls Component: Renders pagination buttons.\n * @param {object} props - Component props.\n * @param {number} props.currentPage - The currently active page number.\n * @param {number} props.totalPages - The total number of pages.\n * @param {Function} props.onPageChange - Callback function when a page button is clicked.\n */\nfunction PaginationControls({ currentPage, totalPages, onPageChange }) {\n  if (totalPages <= 1) return null; // Don't render if only one page\n\n  const pageNumbers = [];\n  for (let i = 1; i <= totalPages; i++) {\n    pageNumbers.push(i);\n  }\n\n  return (\n    <nav aria-label=\"Pagination\" className=\"flex justify-center items-center space-x-2 my-6\">\n      {/* Previous Button */}\n      <button\n        onClick={() => onPageChange(currentPage - 1)}\n        disabled={currentPage === 1}\n        className=\"px-3 py-1 rounded-md bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-white transition-colors\"\n        aria-label=\"Go to previous page\"\n      >\n        &laquo; Prev\n      </button>\n\n      {/* Page Number Buttons */}\n      {pageNumbers.map((number) => (\n        <button\n          key={number}\n          onClick={() => onPageChange(number)}\n          disabled={currentPage === number}\n          className={`px-3 py-1 rounded-md transition-colors ${currentPage === number\n            ? 'bg-indigo-600 text-white font-bold cursor-default'\n            : 'bg-gray-700 hover:bg-gray-600 text-white'\n            }`}\n          aria-current={currentPage === number ? 'page' : undefined}\n        >\n          {number}\n        </button>\n      ))}\n\n      {/* Next Button */}\n      <button\n        onClick={() => onPageChange(currentPage + 1)}\n        disabled={currentPage === totalPages}\n        className=\"px-3 py-1 rounded-md bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-white transition-colors\"\n        aria-label=\"Go to next page\"\n      >\n        Next &raquo;\n      </button>\n    </nav>\n  );\n}\n\n/**\n * SearchBar Component: Provides a search input field.\n * @param {object} props - Component props.\n * @param {Function} props.onSearch - Callback function triggered on search input change.\n * @param {string} props.placeholder - Placeholder text for the input.\n */\nfunction SearchBar({ onSearch, placeholder = \"Search books...\" }) {\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Debounce search input to avoid excessive filtering on every keystroke\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      onSearch(searchTerm);\n    }, 300); // 300ms debounce delay\n\n    // Cleanup function to clear timeout if component unmounts or searchTerm changes\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [searchTerm, onSearch]); // Rerun effect if searchTerm or onSearch changes\n\n  const handleChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  return (\n    <div className=\"my-4\">\n      <label htmlFor=\"search-books\" className=\"sr-only\">{placeholder}</label>\n      <input\n        type=\"search\"\n        id=\"search-books\"\n        value={searchTerm}\n        onChange={handleChange}\n        placeholder={placeholder}\n        className=\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-400\"\n      />\n    </div>\n  );\n}\n\n\n// --- Core Application Components ---\n\n/**\n * LoginPage Component: Handles user and admin login.\n * @param {object} props - Component props.\n * @param {Function} props.onLogin - Callback function for successful login.\n * @param {Function} props.setLoginError - Function to set login-specific errors.\n * @param {boolean} props.isLoggingIn - Indicates if a login attempt is in progress.\n */\nfunction LoginPage({ onLogin, setLoginError, isLoggingIn }) {\n  // State for form inputs\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('user'); // Default role\n\n  /**\n   * Handles the form submission for login.\n   * @param {React.FormEvent} e - The form submission event.\n   */\n  const handleSubmit = async (e) => {\n    e.preventDefault(); // Prevent default browser form submission\n    setLoginError(''); // Clear any previous login errors\n\n    // Basic validation\n    if (!username || !password) {\n      setLoginError('Username and password are required.');\n      return;\n    }\n\n    // Call the onLogin prop (which handles the async logic and state update in App)\n    onLogin(username, password, role);\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white p-4\">\n      <div className=\"bg-gray-800 bg-opacity-90 backdrop-filter backdrop-blur-sm p-8 rounded-xl shadow-2xl w-full max-w-md border border-gray-700\">\n        <h2 className=\"text-3xl font-bold mb-6 text-center text-indigo-400 tracking-wide\">Library Portal Login</h2>\n        <form onSubmit={handleSubmit} noValidate>\n          {/* Username Input */}\n          <div className=\"mb-4 relative\">\n            <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-300 mb-1\">Username</label>\n            <input\n              type=\"text\"\n              id=\"username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              required\n              className=\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white transition-colors\"\n              placeholder=\"e.g., aarush or admin\"\n              aria-describedby=\"username-error\"\n            />\n            {/* Basic validation hint can be added here if needed */}\n          </div>\n\n          {/* Password Input */}\n          <div className=\"mb-4 relative\">\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-300 mb-1\">Password</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n              className=\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white transition-colors\"\n              placeholder=\"Enter password\"\n              aria-describedby=\"password-error\"\n            />\n          </div>\n\n          {/* Role Selection */}\n          <div className=\"mb-6\">\n            <label htmlFor=\"role\" className=\"block text-sm font-medium text-gray-300 mb-1\">Login As</label>\n            <select\n              id=\"role\"\n              value={role}\n              onChange={(e) => setRole(e.target.value)}\n              className=\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white appearance-none\" // appearance-none hides default dropdown arrow\n            >\n              <option value=\"user\">User</option>\n              <option value=\"admin\">Admin</option>\n            </select>\n            {/* Custom dropdown arrow can be added here if desired */}\n          </div>\n\n          {/* Submit Button */}\n          <button\n            type=\"submit\"\n            disabled={isLoggingIn} // Disable button during login attempt\n            className=\"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-800 disabled:cursor-wait text-white font-bold py-2.5 px-4 rounded-md transition duration-300 ease-in-out flex items-center justify-center\"\n          >\n            {isLoggingIn ? (\n              <>\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Logging In...\n              </>\n            ) : (\n              'Login'\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\n/**\n * BookCard Component: Displays individual book information for users.\n * @param {object} props - Component props.\n * @param {object} props.book - The book data object.\n * @param {string} props.userRole - The role of the current user ('user' or 'admin').\n * @param {string} props.currentUsername - The username of the logged-in user.\n * @param {Function} props.onBorrow - Callback to borrow the book.\n * @param {Function} props.onReturn - Callback to return the book.\n * @param {Function} props.onPurchase - Callback to purchase the book.\n * @param {boolean} props.isProcessing - Indicates if an action on this card is in progress.\n */\nfunction BookCard({ book, userRole, currentUsername, onBorrow, onReturn, onPurchase, isProcessing }) {\n  // Determine the state of the book relative to the current user\n  const isBorrowedByCurrentUser = book.borrowedBy === currentUsername;\n  const isBorrowedByOther = book.borrowedBy && !isBorrowedByCurrentUser;\n  const isAvailable = !book.borrowedBy && !book.isPurchased;\n\n  // Determine which actions are possible for the current user\n  const canBorrow = userRole === 'user' && isAvailable;\n  const canReturn = userRole === 'user' && isBorrowedByCurrentUser;\n  const canPurchase = userRole === 'user' && !book.isPurchased; // Can purchase even if borrowed by someone else? Let's assume yes for now.\n\n  // Handle image loading errors\n  const handleImageError = (e) => {\n    e.target.onerror = null; // Prevent infinite loop if placeholder fails\n    e.target.src = PLACEHOLDER_COVER_URL;\n  };\n\n  return (\n    <div\n      className={`bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all duration-300 relative border border-gray-700 flex flex-col\n                       ${book.borrowedBy ? 'border-l-4 border-l-yellow-500' : ''}\n                       ${book.isPurchased ? 'opacity-70 grayscale-[50%]' : 'hover:shadow-indigo-500/30 hover:scale-[1.03]'}\n                       ${isProcessing ? 'animate-pulse' : ''}`} // Add pulse animation when processing\n    >\n      {/* Status Badges */}\n      <div className=\"absolute top-2 right-2 flex flex-col space-y-1 z-10\">\n        {book.borrowedBy && (\n          <span className={`text-xs font-bold px-2 py-0.5 rounded ${isBorrowedByCurrentUser ? 'bg-yellow-600' : 'bg-yellow-800'} text-white shadow`}>\n            Borrowed{isBorrowedByOther ? ` by ${book.borrowedBy}` : ''}\n          </span>\n        )}\n        {book.isPurchased && (\n          <span className=\"bg-green-600 text-white text-xs font-bold px-2 py-0.5 rounded shadow\">\n            Purchased\n          </span>\n        )}\n      </div>\n\n      {/* Book Cover Image */}\n      <div className=\"h-64 w-full overflow-hidden\">\n        <img\n          src={book.coverUrl || PLACEHOLDER_COVER_URL}\n          alt={`Cover of ${book.title}`}\n          className=\"w-full h-full object-cover\"\n          onError={handleImageError}\n          loading=\"lazy\" // Lazy load images\n        />\n      </div>\n\n      {/* Book Details */}\n      <div className=\"p-4 flex flex-col flex-grow\">\n        <h3 className=\"text-lg font-semibold mb-1 text-indigo-300 truncate\" title={book.title}>{book.title}</h3>\n        <p className=\"text-gray-400 text-sm mb-1 truncate\" title={`by ${book.author}`}>by {book.author}</p>\n        <p className=\"text-gray-500 text-xs mb-3 capitalize\">{book.genre}</p>\n\n        {/* Spacer to push buttons to the bottom */}\n        <div className=\"flex-grow\"></div>\n\n        {/* Action Buttons for Users */}\n        {userRole === 'user' && (\n          <div className=\"flex flex-col space-y-2 mt-auto pt-2 border-t border-gray-700\">\n            {/* Borrow Button */}\n            {canBorrow && (\n              <button\n                onClick={() => onBorrow(book.id)}\n                disabled={isProcessing} // Disable while processing\n                className=\"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white text-sm font-semibold py-1.5 px-3 rounded transition duration-200 flex items-center justify-center\"\n              >\n                {isProcessing ? <LoadingSpinner /> : 'Borrow'}\n              </button>\n            )}\n            {/* Return Button */}\n            {canReturn && (\n              <button\n                onClick={() => onReturn(book.id)}\n                disabled={isProcessing}\n                className=\"w-full bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-800 text-white text-sm font-semibold py-1.5 px-3 rounded transition duration-200 flex items-center justify-center\"\n              >\n                {isProcessing ? <LoadingSpinner /> : 'Return'}\n              </button>\n            )}\n            {/* Purchase Button */}\n            {canPurchase && (\n              <button\n                onClick={() => onPurchase(book.id)}\n                disabled={isProcessing}\n                className=\"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white text-sm font-semibold py-1.5 px-3 rounded transition duration-200 flex items-center justify-center\"\n              >\n                {isProcessing ? <LoadingSpinner /> : 'Purchase ($9.99)'}\n              </button>\n            )}\n            {/* Display status if no actions are available */}\n            {!canBorrow && !canReturn && !canPurchase && !book.isPurchased && isBorrowedByOther && (\n              <p className=\"text-center text-xs text-yellow-400 italic\">Currently borrowed by {book.borrowedBy}</p>\n            )}\n            {book.isPurchased && (\n              <p className=\"text-center text-xs text-green-400 italic\">You own this book</p>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * AdminBookList Component: Displays books in a table for administrators with actions.\n * @param {object} props - Component props.\n * @param {Array<object>} props.books - The list of books to display.\n * @param {Function} props.onEdit - Callback function when edit button is clicked.\n * @param {Function} props.onDelete - Callback function when delete button is clicked.\n * @param {string | null} props.processingBookId - ID of the book currently being processed (e.g., deleted).\n */\nfunction AdminBookList({ books, onEdit, onDelete, processingBookId }) {\n  // Handle image loading errors\n  const handleImageError = (e) => {\n    e.target.onerror = null;\n    e.target.src = 'https://placehold.co/50x75/374151/e5e7eb?text=N/A';\n  };\n\n  if (!books || books.length === 0) {\n    return <p className=\"text-center text-gray-400 my-6\">No books found matching your criteria.</p>;\n  }\n\n  return (\n    <div className=\"overflow-x-auto shadow-md rounded-lg border border-gray-700\">\n      <table className=\"w-full text-sm text-left text-gray-400\">\n        {/* Table Header */}\n        <thead className=\"text-xs uppercase bg-gray-700 text-gray-300 sticky top-0 z-10\">\n          <tr>\n            <th scope=\"col\" className=\"px-4 py-3 w-16\">Cover</th>\n            <th scope=\"col\" className=\"px-6 py-3\">Title</th>\n            <th scope=\"col\" className=\"px-6 py-3\">Author</th>\n            <th scope=\"col\" className=\"px-6 py-3\">Genre</th>\n            <th scope=\"col\" className=\"px-6 py-3\">Borrowed By</th>\n            <th scope=\"col\" className=\"px-6 py-3\">Purchased</th>\n            <th scope=\"col\" className=\"px-6 py-3\">Date Added</th>\n            <th scope=\"col\" className=\"px-6 py-3\">Actions</th>\n          </tr>\n        </thead>\n        {/* Table Body */}\n        <tbody>\n          {books.map((book) => (\n            <tr key={book.id} className={`bg-gray-800 border-b border-gray-700 hover:bg-gray-600 transition-colors ${processingBookId === book.id ? 'opacity-50 animate-pulse' : ''}`}>\n              {/* Cover Image */}\n              <td className=\"px-4 py-2\">\n                <img\n                  src={book.coverUrl || 'https://placehold.co/50x75/374151/e5e7eb?text=N/A'}\n                  alt={`Cover for ${book.title}`}\n                  className=\"h-16 w-auto object-cover rounded\"\n                  onError={handleImageError}\n                  loading=\"lazy\"\n                />\n              </td>\n              {/* Book Details */}\n              <th scope=\"row\" className=\"px-6 py-4 font-medium whitespace-nowrap text-white\">{book.title}</th>\n              <td className=\"px-6 py-4\">{book.author}</td>\n              <td className=\"px-6 py-4 capitalize\">{book.genre}</td>\n              <td className=\"px-6 py-4\">{book.borrowedBy || <span className=\"text-green-400 italic\">Available</span>}</td>\n              <td className=\"px-6 py-4\">{book.isPurchased ? <span className=\"text-green-400\">Yes</span> : 'No'}</td>\n              <td className=\"px-6 py-4\">{formatDate(book.addedDate)}</td>\n              {/* Action Buttons */}\n              <td className=\"px-6 py-4 whitespace-nowrap\">\n                <button\n                  onClick={() => onEdit(book)}\n                  disabled={processingBookId === book.id} // Disable if this book is being processed\n                  className=\"font-medium text-blue-500 hover:underline mr-4 disabled:text-gray-500 disabled:cursor-not-allowed\"\n                  aria-label={`Edit ${book.title}`}\n                >\n                  Edit\n                </button>\n                <button\n                  onClick={() => onDelete(book.id)}\n                  disabled={processingBookId === book.id}\n                  className=\"font-medium text-red-500 hover:underline disabled:text-gray-500 disabled:cursor-not-allowed\"\n                  aria-label={`Delete ${book.title}`}\n                >\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\n/**\n * BookForm Component: Reusable form for adding/editing books inside dialogs.\n * @param {object} props - Component props.\n * @param {object} props.initialData - Initial data for form fields (used for editing).\n * @param {Function} props.onSubmit - Callback function when the form is submitted.\n * @param {string} props.submitButtonText - Text for the submit button.\n * @param {boolean} props.isSubmitting - Indicates if the form is currently being submitted.\n */\nfunction BookForm({ initialData, onSubmit, submitButtonText, isSubmitting }) {\n  // State to manage form field values\n  const [formData, setFormData] = useState({\n    title: '',\n    author: '',\n    coverUrl: '',\n    genre: '',\n    ...initialData // Spread initialData to pre-fill fields for editing\n  });\n  // State for form validation errors\n  const [errors, setErrors] = useState({});\n\n  // Update form data when initialData changes (for edit dialog)\n  useEffect(() => {\n    setFormData({\n      title: '',\n      author: '',\n      coverUrl: '',\n      genre: '',\n      ...initialData\n    });\n    setErrors({}); // Clear errors when data changes\n  }, [initialData]);\n\n  /**\n   * Handles changes in form input fields.\n   * @param {React.ChangeEvent<HTMLInputElement>} e - The input change event.\n   */\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    // Clear the error for this field when the user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: null }));\n    }\n  };\n\n  /**\n   * Validates the form data.\n   * @returns {boolean} - True if the form is valid, false otherwise.\n   */\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.title.trim()) newErrors.title = 'Title is required.';\n    if (!formData.author.trim()) newErrors.author = 'Author is required.';\n    if (!formData.genre.trim()) newErrors.genre = 'Genre is required.';\n    // Basic URL validation (optional, can be more sophisticated)\n    if (formData.coverUrl.trim() && !/^https?:\\/\\/.+\\..+/.test(formData.coverUrl)) {\n      newErrors.coverUrl = 'Please enter a valid URL (e.g., http://...).';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0; // Return true if no errors\n  };\n\n  /**\n   * Handles the form submission.\n   * @param {React.FormEvent} e - The form submission event.\n   */\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (validateForm()) {\n      onSubmit(formData); // Call the onSubmit prop with the validated form data\n    }\n  };\n\n  // Reusable input style definition\n  const inputStyle = \"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white transition-colors\";\n  const errorStyle = \"border-red-500 ring-red-500\"; // Style for inputs with errors\n  const errorMessageStyle = \"text-red-400 text-xs mt-1\";\n\n  return (\n    <form onSubmit={handleSubmit} noValidate>\n      {/* Title Field */}\n      <div className=\"mb-4\">\n        <label htmlFor=\"book-title\" className=\"block text-sm font-medium text-gray-300 mb-1\">Title <span className=\"text-red-400\">*</span></label>\n        <input type=\"text\" id=\"book-title\" name=\"title\" value={formData.title} onChange={handleChange} required className={`${inputStyle} ${errors.title ? errorStyle : ''}`} aria-invalid={!!errors.title} aria-describedby=\"title-error\" />\n        {errors.title && <p id=\"title-error\" className={errorMessageStyle}>{errors.title}</p>}\n      </div>\n      {/* Author Field */}\n      <div className=\"mb-4\">\n        <label htmlFor=\"book-author\" className=\"block text-sm font-medium text-gray-300 mb-1\">Author <span className=\"text-red-400\">*</span></label>\n        <input type=\"text\" id=\"book-author\" name=\"author\" value={formData.author} onChange={handleChange} required className={`${inputStyle} ${errors.author ? errorStyle : ''}`} aria-invalid={!!errors.author} aria-describedby=\"author-error\" />\n        {errors.author && <p id=\"author-error\" className={errorMessageStyle}>{errors.author}</p>}\n      </div>\n      {/* Cover URL Field */}\n      <div className=\"mb-4\">\n        <label htmlFor=\"book-coverUrl\" className=\"block text-sm font-medium text-gray-300 mb-1\">Cover URL</label>\n        <input type=\"text\" id=\"book-coverUrl\" name=\"coverUrl\" value={formData.coverUrl} onChange={handleChange} placeholder=\"http://example.com/cover.jpg\" className={`${inputStyle} ${errors.coverUrl ? errorStyle : ''}`} aria-invalid={!!errors.coverUrl} aria-describedby=\"coverUrl-error\" />\n        {errors.coverUrl && <p id=\"coverUrl-error\" className={errorMessageStyle}>{errors.coverUrl}</p>}\n      </div>\n      {/* Genre Field */}\n      <div className=\"mb-4\">\n        <label htmlFor=\"book-genre\" className=\"block text-sm font-medium text-gray-300 mb-1\">Genre <span className=\"text-red-400\">*</span></label>\n        <input type=\"text\" id=\"book-genre\" name=\"genre\" value={formData.genre} onChange={handleChange} required className={`${inputStyle} ${errors.genre ? errorStyle : ''}`} aria-invalid={!!errors.genre} aria-describedby=\"genre-error\" />\n        {errors.genre && <p id=\"genre-error\" className={errorMessageStyle}>{errors.genre}</p>}\n      </div>\n\n      {/* Submit Button */}\n      <div className=\"flex justify-end mt-6\">\n        <button\n          type=\"submit\"\n          disabled={isSubmitting} // Disable while submitting\n          className=\"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-800 disabled:cursor-wait text-white font-semibold rounded-md shadow-md transition duration-200 flex items-center justify-center min-w-[120px]\" // min-width to prevent size change\n        >\n          {isSubmitting ? <LoadingSpinner /> : submitButtonText}\n        </button>\n      </div>\n    </form>\n  );\n}\n\n\n/**\n * Modal Component: A reusable modal dialog wrapper.\n * @param {object} props - Component props.\n * @param {boolean} props.isOpen - Controls whether the modal is visible.\n * @param {Function} props.onClose - Callback function when the modal should be closed.\n * @param {string} props.title - The title displayed in the modal header.\n * @param {React.ReactNode} props.children - The content to be rendered inside the modal.\n */\nfunction Modal({ isOpen, onClose, title, children }) {\n  // Effect to handle closing modal on Escape key press\n  useEffect(() => {\n    const handleEsc = (event) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n    if (isOpen) {\n      window.addEventListener('keydown', handleEsc);\n    }\n    // Cleanup listener on component unmount or when modal closes\n    return () => {\n      window.removeEventListener('keydown', handleEsc);\n    };\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null; // Don't render if not open\n\n  return (\n    // Overlay covering the entire screen\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4 transition-opacity duration-300\"\n      onClick={onClose} // Close modal if overlay is clicked\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"modal-title\"\n    >\n      {/* Modal Content Box */}\n      <div\n        className=\"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg text-white border border-gray-700 relative max-h-[90vh] overflow-y-auto\"\n        onClick={(e) => e.stopPropagation()} // Prevent clicks inside the modal from closing it\n      >\n        {/* Modal Header */}\n        <div className=\"flex justify-between items-center mb-4 pb-2 border-b border-gray-600\">\n          <h2 id=\"modal-title\" className=\"text-2xl font-bold text-indigo-400\">{title}</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-white text-2xl leading-none font-bold\"\n            aria-label=\"Close modal\"\n          >\n            &times;\n          </button>\n        </div>\n        {/* Modal Body (Content) */}\n        <div>\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/**\n * AddBookDialog Component: Modal dialog for adding a new book.\n * @param {object} props - Component props.\n * @param {boolean} props.isOpen - Controls visibility.\n * @param {Function} props.onClose - Callback to close the dialog.\n * @param {Function} props.onAddBook - Callback to handle adding the book.\n * @param {boolean} props.isSubmitting - Indicates if add operation is in progress.\n */\nfunction AddBookDialog({ isOpen, onClose, onAddBook, isSubmitting }) {\n  /**\n   * Handles the submission of the add book form.\n   * @param {object} formData - The validated form data from BookForm.\n   */\n  const handleAddSubmit = (formData) => {\n    const newBook = {\n      id: generateId(), // Generate a unique ID\n      ...formData, // Spread the form data (title, author, etc.)\n      borrowedBy: null, // New books are not borrowed\n      isPurchased: false, // New books are not purchased\n      addedDate: new Date().toISOString().split('T')[0], // Set added date to today\n    };\n    onAddBook(newBook); // Call the handler passed from App\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Add New Book\">\n      <BookForm\n        onSubmit={handleAddSubmit}\n        submitButtonText=\"Add Book\"\n        isSubmitting={isSubmitting}\n      // initialData is empty for adding\n      />\n    </Modal>\n  );\n}\n\n/**\n * EditBookDialog Component: Modal dialog for editing an existing book.\n * @param {object} props - Component props.\n * @param {boolean} props.isOpen - Controls visibility.\n * @param {Function} props.onClose - Callback to close the dialog.\n * @param {Function} props.onEditBook - Callback to handle editing the book.\n * @param {object | null} props.bookToEdit - The book object being edited.\n * @param {boolean} props.isSubmitting - Indicates if edit operation is in progress.\n */\nfunction EditBookDialog({ isOpen, onClose, onEditBook, bookToEdit, isSubmitting }) {\n  /**\n  * Handles the submission of the edit book form.\n  * @param {object} formData - The validated form data from BookForm.\n  */\n  const handleEditSubmit = (formData) => {\n    if (!bookToEdit) return; // Should not happen if dialog is open correctly\n    // Merge existing book data (like id, borrowedBy, etc.) with updated form data\n    const updatedBook = {\n      ...bookToEdit,\n      ...formData, // Overwrite with new title, author, etc.\n    };\n    onEditBook(updatedBook); // Call the handler passed from App\n  };\n\n  return (\n    <Modal isOpen={isOpen && !!bookToEdit} onClose={onClose} title=\"Edit Book Details\">\n      {bookToEdit && ( // Ensure bookToEdit exists before rendering form\n        <BookForm\n          initialData={{ // Pass existing data to pre-fill the form\n            title: bookToEdit.title,\n            author: bookToEdit.author,\n            coverUrl: bookToEdit.coverUrl || '',\n            genre: bookToEdit.genre,\n          }}\n          onSubmit={handleEditSubmit}\n          submitButtonText=\"Save Changes\"\n          isSubmitting={isSubmitting}\n        />\n      )}\n    </Modal>\n  );\n}\n\n/**\n * AppHeader Component: Displays the application header and navigation.\n * @param {object} props - Component props.\n * @param {object} props.loggedInUser - The currently logged-in user object.\n * @param {Function} props.onLogout - Callback function for logging out.\n */\nfunction AppHeader({ loggedInUser, onLogout }) {\n  return (\n    <header className=\"mb-8 p-4 bg-gray-800 rounded-lg shadow-md border border-gray-700\">\n      <div className=\"flex flex-col md:flex-row justify-between items-center\">\n        {/* Left side: Title and Welcome Message */}\n        <div>\n          <h1 className=\"text-2xl md:text-3xl font-bold text-indigo-400 tracking-tight\">\n            Modern Library System\n          </h1>\n          {loggedInUser && (\n            <p className=\"text-gray-400 text-sm mt-1\">\n              Welcome, <span className=\"font-semibold\">{loggedInUser.fullName || loggedInUser.username}</span> ({loggedInUser.role})\n            </p>\n          )}\n        </div>\n        {/* Right side: Logout Button */}\n        {loggedInUser && (\n          <button\n            onClick={onLogout}\n            className=\"mt-4 md:mt-0 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition duration-200 text-sm\"\n          >\n            Logout\n          </button>\n        )}\n      </div>\n    </header>\n  );\n}\n\n\n// --- Main App Component ---\nfunction App() {\n  // --- State Variables ---\n\n  // Authentication State\n  const [loggedInUser, setLoggedInUser] = useState(null); // Stores { username, role, fullName, ... } or null\n  const [isLoggingIn, setIsLoggingIn] = useState(false); // Loading state for login process\n  const [loginError, setLoginError] = useState(''); // Specific error messages for the login page\n\n  // Book Data State\n  const [allBooks, setAllBooks] = useState(initialBooks); // Master list of all books\n  const [filteredBooks, setFilteredBooks] = useState(initialBooks); // Books after applying search/filter\n\n  // UI State\n  const [globalLoading, setGlobalLoading] = useState(false); // General loading state for non-specific actions\n  const [globalMessage, setGlobalMessage] = useState({ type: '', text: '' }); // For global success/error messages { type: 'success' | 'error', text: '...' }\n  const [processingBookId, setProcessingBookId] = useState(null); // ID of book currently undergoing an action (borrow, return, delete etc.)\n\n  // Dialog State\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [showEditDialog, setShowEditDialog] = useState(false);\n  const [bookToEdit, setBookToEdit] = useState(null);\n  const [isDialogSubmitting, setIsDialogSubmitting] = useState(false); // Loading state for dialog form submissions\n\n  // Search and Pagination State\n  const [searchTerm, setSearchTerm] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n\n  // --- Derived State and Memos ---\n\n  // Memoize filtered books based on search term\n  const booksMatchingSearch = useMemo(() => {\n    if (!searchTerm) {\n      return allBooks; // Return all books if search term is empty\n    }\n    const lowerCaseSearchTerm = searchTerm.toLowerCase();\n    return allBooks.filter(book =>\n      book.title.toLowerCase().includes(lowerCaseSearchTerm) ||\n      book.author.toLowerCase().includes(lowerCaseSearchTerm) ||\n      book.genre.toLowerCase().includes(lowerCaseSearchTerm)\n    );\n  }, [allBooks, searchTerm]); // Recalculate only when allBooks or searchTerm changes\n\n  // Calculate pagination details based on filtered books\n  const totalPages = useMemo(() => {\n    return Math.ceil(booksMatchingSearch.length / BOOKS_PER_PAGE);\n  }, [booksMatchingSearch.length]); // Recalculate only when filtered book count changes\n\n  // Get the books to display on the current page\n  const paginatedBooks = useMemo(() => {\n    const startIndex = (currentPage - 1) * BOOKS_PER_PAGE;\n    const endIndex = startIndex + BOOKS_PER_PAGE;\n    return booksMatchingSearch.slice(startIndex, endIndex);\n  }, [booksMatchingSearch, currentPage]); // Recalculate when filtered books or current page changes\n\n  // --- Effects ---\n\n  // Effect to clear global message after a delay\n  useEffect(() => {\n    if (globalMessage.text) {\n      const timer = setTimeout(() => {\n        setGlobalMessage({ type: '', text: '' });\n      }, 4000); // Clear message after 4 seconds\n      return () => clearTimeout(timer); // Cleanup timer on unmount or if message changes\n    }\n  }, [globalMessage]);\n\n  // Effect to reset pagination when search term changes\n  useEffect(() => {\n    setCurrentPage(1); // Go back to first page on new search\n  }, [searchTerm]);\n\n  // Effect to reset pagination if the current page becomes invalid after deletion\n  useEffect(() => {\n    if (currentPage > totalPages && totalPages > 0) {\n      setCurrentPage(totalPages); // Go to last valid page\n    }\n    // If no books left on any page, reset to 1 (handles case where last item on last page is deleted)\n    if (totalPages === 0 && currentPage !== 1) {\n      setCurrentPage(1);\n    }\n  }, [totalPages, currentPage]);\n\n\n  // --- Utility Functions ---\n\n  /**\n   * Sets a global message (success or error).\n   * @param {'success' | 'error'} type - The type of message.\n   * @param {string} text - The message content.\n   */\n  const showGlobalMessage = (type, text) => {\n    setGlobalMessage({ type, text });\n  };\n\n  // --- Authentication Handlers ---\n\n  /**\n   * Handles the login attempt.\n   * @param {string} username - Entered username.\n   * @param {string} password - Entered password.\n   * @param {'user' | 'admin'} role - Selected role.\n   */\n  const handleLogin = useCallback(async (username, password, role) => {\n    setIsLoggingIn(true);\n    setLoginError(''); // Clear previous login errors\n\n    await simulateApiCall(() => {\n      let user = null;\n      if (role === 'admin') {\n        if (username === 'admin' && password === hardcodedCredentials.admin.password) {\n          user = { username: 'admin', role: 'admin', ...hardcodedCredentials.admin };\n        }\n      } else { // Role is 'user'\n        const userData = hardcodedCredentials.users[username];\n        if (userData && userData.password === password) {\n          user = { username, role: 'user', ...userData };\n        }\n      }\n\n      if (user) {\n        setLoggedInUser(user);\n        showGlobalMessage('success', `Welcome back, ${user.fullName || user.username}!`);\n      } else {\n        setLoginError('Invalid username, password, or role.'); // Set specific login error\n      }\n    });\n\n    setIsLoggingIn(false);\n  }, []); // No dependencies, this function doesn't change\n\n  /** Handles user logout */\n  const handleLogout = useCallback(() => {\n    setLoggedInUser(null);\n    setSearchTerm(''); // Clear search on logout\n    setCurrentPage(1); // Reset page\n    showGlobalMessage('info', 'You have been logged out.');\n  }, []); // No dependencies\n\n  // --- Book Action Handlers (Admin) ---\n\n  /** Handles adding a new book */\n  const handleAddBook = useCallback(async (newBook) => {\n    setIsDialogSubmitting(true);\n    setGlobalLoading(true); // Indicate global loading as well\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks => [...prevBooks, newBook].sort((a, b) => a.title.localeCompare(b.title))); // Add and keep sorted\n      setShowAddDialog(false); // Close dialog\n      showGlobalMessage('success', `Book \"${newBook.title}\" added successfully.`);\n    });\n    setIsDialogSubmitting(false);\n    setGlobalLoading(false);\n  }, []);\n\n  /** Handles editing an existing book */\n  const handleEditBook = useCallback(async (updatedBook) => {\n    setIsDialogSubmitting(true);\n    setGlobalLoading(true);\n    setProcessingBookId(updatedBook.id); // Mark book as processing in the list\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks =>\n        prevBooks.map(book => (book.id === updatedBook.id ? updatedBook : book))\n          .sort((a, b) => a.title.localeCompare(b.title)) // Keep sorted\n      );\n      setShowEditDialog(false); // Close dialog\n      setBookToEdit(null);\n      showGlobalMessage('success', `Book \"${updatedBook.title}\" updated successfully.`);\n    });\n    setIsDialogSubmitting(false);\n    setGlobalLoading(false);\n    setProcessingBookId(null); // Clear processing state\n  }, []);\n\n  /** Handles deleting a book */\n  const handleDeleteBook = useCallback(async (bookId) => {\n    // Find the book title for the confirmation message\n    const bookToDelete = allBooks.find(b => b.id === bookId);\n    if (!bookToDelete) return; // Should not happen\n\n    if (!window.confirm(`Are you sure you want to permanently delete \"${bookToDelete.title}\"?`)) {\n      return; // User cancelled\n    }\n\n    setGlobalLoading(true);\n    setProcessingBookId(bookId); // Mark book as processing\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks => prevBooks.filter(book => book.id !== bookId));\n      showGlobalMessage('success', `Book \"${bookToDelete.title}\" deleted successfully.`);\n      // Pagination will adjust automatically via useEffect dependency on totalPages\n    });\n    setGlobalLoading(false);\n    setProcessingBookId(null); // Clear processing state\n  }, [allBooks]); // Depends on allBooks to find the title\n\n  // --- Book Action Handlers (User) ---\n\n  /** Handles borrowing a book */\n  const handleBorrowBook = useCallback(async (bookId) => {\n    if (!loggedInUser || loggedInUser.role !== 'user') return;\n    const bookToBorrow = allBooks.find(b => b.id === bookId);\n    if (!bookToBorrow || bookToBorrow.borrowedBy || bookToBorrow.isPurchased) {\n      showGlobalMessage('error', 'Book cannot be borrowed at this time.');\n      return;\n    }\n\n    setGlobalLoading(true);\n    setProcessingBookId(bookId);\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks =>\n        prevBooks.map(book =>\n          book.id === bookId ? { ...book, borrowedBy: loggedInUser.username } : book\n        )\n      );\n      showGlobalMessage('success', `You have borrowed \"${bookToBorrow.title}\".`);\n    });\n    setGlobalLoading(false);\n    setProcessingBookId(null);\n  }, [loggedInUser, allBooks]); // Depends on loggedInUser and allBooks\n\n  /** Handles returning a book */\n  const handleReturnBook = useCallback(async (bookId) => {\n    if (!loggedInUser || loggedInUser.role !== 'user') return;\n    const bookToReturn = allBooks.find(b => b.id === bookId);\n    if (!bookToReturn || bookToReturn.borrowedBy !== loggedInUser.username) {\n      showGlobalMessage('error', 'You cannot return this book.');\n      return;\n    }\n\n    setGlobalLoading(true);\n    setProcessingBookId(bookId);\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks =>\n        prevBooks.map(book =>\n          book.id === bookId ? { ...book, borrowedBy: null } : book\n        )\n      );\n      showGlobalMessage('success', `You have returned \"${bookToReturn.title}\".`);\n    });\n    setGlobalLoading(false);\n    setProcessingBookId(null);\n  }, [loggedInUser, allBooks]);\n\n  /** Handles purchasing a book */\n  const handlePurchaseBook = useCallback(async (bookId) => {\n    if (!loggedInUser || loggedInUser.role !== 'user') return;\n    const bookToPurchase = allBooks.find(b => b.id === bookId);\n    if (!bookToPurchase || bookToPurchase.isPurchased) {\n      showGlobalMessage('error', 'This book cannot be purchased.');\n      return;\n    }\n\n    if (!window.confirm(`Confirm purchase of \"${bookToPurchase.title}\" for $9.99? This action cannot be undone.`)) {\n      return; // User cancelled\n    }\n\n    setGlobalLoading(true);\n    setProcessingBookId(bookId);\n    await simulateApiCall(() => {\n      setAllBooks(prevBooks =>\n        prevBooks.map(book =>\n          book.id === bookId ? { ...book, isPurchased: true, borrowedBy: null } : book // Mark as purchased, ensure not borrowed\n        )\n      );\n      showGlobalMessage('success', `You have purchased \"${bookToPurchase.title}\". Thank you!`);\n      // Note: In a real app, you'd update the user's purchase history here too.\n      // This example keeps it simple by only modifying the book state.\n    });\n    setGlobalLoading(false);\n    setProcessingBookId(null);\n  }, [loggedInUser, allBooks]);\n\n  // --- Dialog Open/Close Handlers ---\n  const openAddDialog = useCallback(() => setShowAddDialog(true), []);\n  const closeAddDialog = useCallback(() => setShowAddDialog(false), []);\n\n  const openEditDialog = useCallback((book) => {\n    setBookToEdit(book);\n    setShowEditDialog(true);\n  }, []);\n  const closeEditDialog = useCallback(() => {\n    setShowEditDialog(false);\n    // Delay clearing bookToEdit slightly to prevent content flicker during closing animation\n    setTimeout(() => setBookToEdit(null), 300);\n  }, []);\n\n  // --- Search Handler ---\n  const handleSearch = useCallback((query) => {\n    setSearchTerm(query);\n  }, []); // Doesn't change\n\n  // --- Pagination Handler ---\n  const handlePageChange = useCallback((pageNumber) => {\n    // Ensure page number is within valid range\n    if (pageNumber >= 1 && pageNumber <= totalPages) {\n      setCurrentPage(pageNumber);\n      window.scrollTo(0, 0); // Scroll to top on page change\n    }\n  }, [totalPages]); // Depends on totalPages\n\n\n  // --- Render Logic ---\n\n  // Render Login Page if not logged in\n  if (!loggedInUser) {\n    return (\n      <>\n        <LoginPage\n          onLogin={handleLogin}\n          setLoginError={setLoginError} // Pass setter for login-specific errors\n          isLoggingIn={isLoggingIn}\n        />\n        {/* Display login error below the login form */}\n        {loginError && (\n          <div className=\"fixed bottom-4 right-4 z-50\">\n            <AlertMessage type=\"error\" message={loginError} onDismiss={() => setLoginError('')} />\n          </div>\n        )}\n      </>\n    );\n  }\n\n  // Render Main Application View if logged in\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white p-4 md:p-8 relative\">\n      {/* Application Header */}\n      <AppHeader loggedInUser={loggedInUser} onLogout={handleLogout} />\n\n      {/* Global Loading Indicator */}\n      {globalLoading && !isDialogSubmitting && <LoadingSpinner />}\n\n      {/* Global Messages */}\n      <div className=\"fixed top-4 right-4 z-[100]\">\n        <AlertMessage\n          type={globalMessage.type}\n          message={globalMessage.text}\n          onDismiss={() => setGlobalMessage({ type: '', text: '' })}\n        />\n      </div>\n\n\n      {/* Main Content Area */}\n      <main className=\"mt-6\">\n\n        {/* Admin View Specific Controls */}\n        {loggedInUser.role === 'admin' && (\n          <div className=\"mb-6 flex flex-col md:flex-row justify-between items-center gap-4 p-4 bg-gray-800 rounded-lg border border-gray-700\">\n            <h2 className=\"text-xl font-semibold text-indigo-300\">Admin Dashboard</h2>\n            <button\n              onClick={openAddDialog}\n              className=\"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md shadow-md transition duration-200 text-sm w-full md:w-auto\"\n            >\n              + Add New Book\n            </button>\n          </div>\n        )}\n\n        {/* Search Bar (Common for both roles) */}\n        <SearchBar onSearch={handleSearch} placeholder={loggedInUser.role === 'admin' ? \"Search by title, author, genre...\" : \"Search available books...\"} />\n\n\n        {/* Content based on Role */}\n        {loggedInUser.role === 'admin' ? (\n          // Admin View: Table\n          <div className=\"space-y-6\">\n            <AdminBookList\n              books={paginatedBooks} // Display paginated books\n              onEdit={openEditDialog}\n              onDelete={handleDeleteBook}\n              processingBookId={processingBookId}\n            />\n            <PaginationControls\n              currentPage={currentPage}\n              totalPages={totalPages}\n              onPageChange={handlePageChange}\n            />\n          </div>\n        ) : (\n          // User View: Grid of Cards\n          <>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\n              {paginatedBooks.length > 0 ? (\n                paginatedBooks.map(book => (\n                  <BookCard\n                    key={book.id}\n                    book={book}\n                    userRole={loggedInUser.role}\n                    currentUsername={loggedInUser.username}\n                    onBorrow={handleBorrowBook}\n                    onReturn={handleReturnBook}\n                    onPurchase={handlePurchaseBook}\n                    isProcessing={processingBookId === book.id} // Pass processing state\n                  />\n                ))\n              ) : (\n                <p className=\"text-center text-gray-400 col-span-full my-6\">\n                  {searchTerm ? 'No books match your search.' : 'No books available at the moment.'}\n                </p>\n              )}\n            </div>\n            <PaginationControls\n              currentPage={currentPage}\n              totalPages={totalPages}\n              onPageChange={handlePageChange}\n            />\n          </>\n        )}\n      </main>\n\n      {/* Footer (Optional) */}\n      <footer className=\"text-center text-gray-500 text-xs mt-12 border-t border-gray-700 pt-4\">\n        Library Management System &copy; {new Date().getFullYear()}\n      </footer>\n\n      {/* Dialogs (Modals) Rendered Here */}\n      <AddBookDialog\n        isOpen={showAddDialog}\n        onClose={closeAddDialog}\n        onAddBook={handleAddBook}\n        isSubmitting={isDialogSubmitting}\n      />\n      <EditBookDialog\n        isOpen={showEditDialog}\n        onClose={closeEditDialog}\n        onEditBook={handleEditBook}\n        bookToEdit={bookToEdit}\n        isSubmitting={isDialogSubmitting}\n      />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;;;;;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,OAAO,QAAQ,OAAO;;AAExE;;AAEA;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,cAAc,GAAG,CAAC;;AAExB;AACA,MAAMC,oBAAoB,GAAG,GAAG;;AAEhC;AACA,MAAMC,qBAAqB,GAAG,0DAA0D;;AAExF;;AAEA;AACA,MAAMC,YAAY,GAAG,CACnB;EAAEC,EAAE,EAAE,IAAI;EAAEC,KAAK,EAAE,kBAAkB;EAAEC,MAAM,EAAE,qBAAqB;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,SAAS;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EACjO;EAAEP,EAAE,EAAE,IAAI;EAAEC,KAAK,EAAE,uBAAuB;EAAEC,MAAM,EAAE,YAAY;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,SAAS;EAAEC,UAAU,EAAE,QAAQ;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EACjO;EAAEP,EAAE,EAAE,IAAI;EAAEC,KAAK,EAAE,MAAM;EAAEC,MAAM,EAAE,eAAe;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,WAAW;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EACjN;EAAEP,EAAE,EAAE,IAAI;EAAEC,KAAK,EAAE,qBAAqB;EAAEC,MAAM,EAAE,aAAa;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,SAAS;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,IAAI;EAAEC,SAAS,EAAE;AAAa,CAAC,EAC3N;EAAEP,EAAE,EAAE,IAAI;EAAEC,KAAK,EAAE,YAAY;EAAEC,MAAM,EAAE,gBAAgB;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,SAAS;EAAEC,UAAU,EAAE,QAAQ;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EAC1N;EAAEP,EAAE,EAAE,IAAI;EAAEC,KAAK,EAAE,wBAAwB;EAAEC,MAAM,EAAE,eAAe;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,SAAS;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EACjO;EAAEP,EAAE,EAAE,IAAI;EAAEC,KAAK,EAAE,iBAAiB;EAAEC,MAAM,EAAE,eAAe;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,WAAW;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EAC5N;EAAEP,EAAE,EAAE,IAAI;EAAEC,KAAK,EAAE,WAAW;EAAEC,MAAM,EAAE,iBAAiB;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,WAAW;EAAEC,UAAU,EAAE,QAAQ;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EAC5N;EAAEP,EAAE,EAAE,IAAI;EAAEC,KAAK,EAAE,eAAe;EAAEC,MAAM,EAAE,aAAa;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,oBAAoB;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EACjO;EAAEP,EAAE,EAAE,KAAK;EAAEC,KAAK,EAAE,uBAAuB;EAAEC,MAAM,EAAE,gBAAgB;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,SAAS;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EAClO;EAAEP,EAAE,EAAE,KAAK;EAAEC,KAAK,EAAE,aAAa;EAAEC,MAAM,EAAE,qBAAqB;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,QAAQ;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EAC5N;EAAEP,EAAE,EAAE,KAAK;EAAEC,KAAK,EAAE,cAAc;EAAEC,MAAM,EAAE,cAAc;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,gBAAgB;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EAC9N;EAAEP,EAAE,EAAE,KAAK;EAAEC,KAAK,EAAE,kCAAkC;EAAEC,MAAM,EAAE,eAAe;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,SAAS;EAAEC,UAAU,EAAE,QAAQ;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EAChP;EAAEP,EAAE,EAAE,KAAK;EAAEC,KAAK,EAAE,aAAa;EAAEC,MAAM,EAAE,OAAO;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,aAAa;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,EACnN;EAAEP,EAAE,EAAE,KAAK;EAAEC,KAAK,EAAE,sBAAsB;EAAEC,MAAM,EAAE,mBAAmB;EAAEC,QAAQ,EAAE,8DAA8D;EAAEC,KAAK,EAAE,uBAAuB;EAAEC,UAAU,EAAE,IAAI;EAAEC,WAAW,EAAE,KAAK;EAAEC,SAAS,EAAE;AAAa,CAAC,CACnP;;AAED;AACA,MAAMC,oBAAoB,GAAG;EAC3BC,KAAK,EAAE;IAAEC,QAAQ,EAAE,QAAQ;IAAEC,QAAQ,EAAE,eAAe;IAAEC,QAAQ,EAAE;EAAa,CAAC;EAChFC,KAAK,EAAE;IACLC,MAAM,EAAE;MAAEJ,QAAQ,EAAE,QAAQ;MAAEC,QAAQ,EAAE,eAAe;MAAEC,QAAQ,EAAE,YAAY;MAAEG,eAAe,EAAE,CAAC,IAAI;IAAE,CAAC;IAC1GC,MAAM,EAAE;MAAEN,QAAQ,EAAE,QAAQ;MAAEC,QAAQ,EAAE,cAAc;MAAEC,QAAQ,EAAE,YAAY;MAAEG,eAAe,EAAE;IAAG,CAAC;IACrGE,MAAM,EAAE;MAAEP,QAAQ,EAAE,QAAQ;MAAEC,QAAQ,EAAE,cAAc;MAAEC,QAAQ,EAAE,YAAY;MAAEG,eAAe,EAAE;IAAG,CAAC;IACrGG,KAAK,EAAE;MAAER,QAAQ,EAAE,UAAU;MAAEC,QAAQ,EAAE,aAAa;MAAEC,QAAQ,EAAE,YAAY;MAAEG,eAAe,EAAE;IAAG,CAAC;IACrGI,KAAK,EAAE;MAAET,QAAQ,EAAE,aAAa;MAAEC,QAAQ,EAAE,aAAa;MAAEC,QAAQ,EAAE,YAAY;MAAEG,eAAe,EAAE;IAAG;EACzG;AACF,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMK,eAAe,GAAGA,CAACC,QAAQ,EAAEC,KAAK,GAAGzB,oBAAoB,KAAK;EAClE,OAAO,IAAI0B,OAAO,CAACC,OAAO,IAAIC,UAAU,CAAC,MAAMD,OAAO,CAACH,QAAQ,CAAC,CAAC,CAAC,EAAEC,KAAK,CAAC,CAAC;AAC7E,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMI,UAAU,GAAGA,CAAA,KAAM,MAAMC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;;AAEtF;AACA;AACA;AACA;AACA;AACA,MAAMC,UAAU,GAAIC,UAAU,IAAK;EACjC,IAAI,CAACA,UAAU,EAAE,OAAO,KAAK;EAC7B,IAAI;IACF,MAAMC,IAAI,GAAG,IAAIR,IAAI,CAACO,UAAU,CAAC;IACjC;IACA,OAAOC,IAAI,CAACC,kBAAkB,CAAC,OAAO,EAAE;MAAEC,IAAI,EAAE,SAAS;MAAEC,KAAK,EAAE,OAAO;MAAEC,GAAG,EAAE;IAAU,CAAC,CAAC;EAC9F,CAAC,CAAC,OAAOC,CAAC,EAAE;IACVC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAER,UAAU,EAAEM,CAAC,CAAC;IACtD,OAAO,cAAc;EACvB;AACF,CAAC;;AAED;;AAEA;AACA;AACA;AACA,SAASG,cAAcA,CAAA,EAAG;EACxB,oBACElD,OAAA;IAAKmD,SAAS,EAAC,uCAAuC;IAAC,cAAW,iBAAiB;IAAAC,QAAA,gBACjFpD,OAAA;MAAKmD,SAAS,EAAC,iDAAiD;MAACE,KAAK,EAAC,4BAA4B;MAACC,IAAI,EAAC,MAAM;MAACC,OAAO,EAAC,WAAW;MAAAH,QAAA,gBACjIpD,OAAA;QAAQmD,SAAS,EAAC,YAAY;QAACK,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC,IAAI;QAACC,CAAC,EAAC,IAAI;QAACC,MAAM,EAAC,cAAc;QAACC,WAAW,EAAC;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC,eACrGhE,OAAA;QAAMmD,SAAS,EAAC,YAAY;QAACG,IAAI,EAAC,cAAc;QAACW,CAAC,EAAC;MAAiH;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzK,CAAC,eACNhE,OAAA;MAAMmD,SAAS,EAAC,iBAAiB;MAAAC,QAAA,EAAC;IAAa;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnD,CAAC;AAEV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANAE,EAAA,GAZShB,cAAc;AAmBvB,SAASiB,YAAYA,CAAC;EAAEC,IAAI,GAAG,MAAM;EAAEC,OAAO;EAAEC;AAAU,CAAC,EAAE;EAC3D,IAAI,CAACD,OAAO,EAAE,OAAO,IAAI;EAEzB,MAAME,WAAW,GAAG,oCAAoC;EACxD,MAAMC,WAAW,GAAG;IAClBC,OAAO,EAAE,qDAAqD;IAC9DxB,KAAK,EAAE,+CAA+C;IACtDyB,IAAI,EAAE;EACR,CAAC;EAED,oBACE1E,OAAA;IAAKmD,SAAS,EAAE,GAAGoB,WAAW,IAAIC,WAAW,CAACJ,IAAI,CAAC,EAAG;IAACO,IAAI,EAAC,OAAO;IAAAvB,QAAA,eACjEpD,OAAA;MAAKmD,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChDpD,OAAA;QAAAoD,QAAA,EAAOiB;MAAO;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,EACrBM,SAAS,iBACRtE,OAAA;QACE4E,OAAO,EAAEN,SAAU;QACnBnB,SAAS,EAAC,sDAAsD;QAChE,cAAW,eAAe;QAAAC,QAAA,EAC3B;MAED;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANAa,GAAA,GA5BSV,YAAY;AAmCrB,SAASW,kBAAkBA,CAAC;EAAEC,WAAW;EAAEC,UAAU;EAAEC;AAAa,CAAC,EAAE;EACrE,IAAID,UAAU,IAAI,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC;;EAElC,MAAME,WAAW,GAAG,EAAE;EACtB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIH,UAAU,EAAEG,CAAC,EAAE,EAAE;IACpCD,WAAW,CAACE,IAAI,CAACD,CAAC,CAAC;EACrB;EAEA,oBACEnF,OAAA;IAAK,cAAW,YAAY;IAACmD,SAAS,EAAC,iDAAiD;IAAAC,QAAA,gBAEtFpD,OAAA;MACE4E,OAAO,EAAEA,CAAA,KAAMK,YAAY,CAACF,WAAW,GAAG,CAAC,CAAE;MAC7CM,QAAQ,EAAEN,WAAW,KAAK,CAAE;MAC5B5B,SAAS,EAAC,iIAAiI;MAC3I,cAAW,qBAAqB;MAAAC,QAAA,EACjC;IAED;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAGRkB,WAAW,CAACI,GAAG,CAAEC,MAAM,iBACtBvF,OAAA;MAEE4E,OAAO,EAAEA,CAAA,KAAMK,YAAY,CAACM,MAAM,CAAE;MACpCF,QAAQ,EAAEN,WAAW,KAAKQ,MAAO;MACjCpC,SAAS,EAAE,0CAA0C4B,WAAW,KAAKQ,MAAM,GACvE,mDAAmD,GACnD,0CAA0C,EACzC;MACL,gBAAcR,WAAW,KAAKQ,MAAM,GAAG,MAAM,GAAGC,SAAU;MAAApC,QAAA,EAEzDmC;IAAM,GATFA,MAAM;MAAA1B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAUL,CACT,CAAC,eAGFhE,OAAA;MACE4E,OAAO,EAAEA,CAAA,KAAMK,YAAY,CAACF,WAAW,GAAG,CAAC,CAAE;MAC7CM,QAAQ,EAAEN,WAAW,KAAKC,UAAW;MACrC7B,SAAS,EAAC,iIAAiI;MAC3I,cAAW,iBAAiB;MAAAC,QAAA,EAC7B;IAED;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;;AAEA;AACA;AACA;AACA;AACA;AACA;AALAyB,GAAA,GAjDSX,kBAAkB;AAuD3B,SAASY,SAASA,CAAC;EAAEC,QAAQ;EAAEC,WAAW,GAAG;AAAkB,CAAC,EAAE;EAAAC,EAAA;EAChE,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGpG,QAAQ,CAAC,EAAE,CAAC;;EAEhD;EACAC,SAAS,CAAC,MAAM;IACd,MAAMoG,OAAO,GAAGhE,UAAU,CAAC,MAAM;MAC/B2D,QAAQ,CAACG,UAAU,CAAC;IACtB,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;;IAET;IACA,OAAO,MAAM;MACXG,YAAY,CAACD,OAAO,CAAC;IACvB,CAAC;EACH,CAAC,EAAE,CAACF,UAAU,EAAEH,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAE5B,MAAMO,YAAY,GAAIC,KAAK,IAAK;IAC9BJ,aAAa,CAACI,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EACnC,CAAC;EAED,oBACErG,OAAA;IAAKmD,SAAS,EAAC,MAAM;IAAAC,QAAA,gBACnBpD,OAAA;MAAOsG,OAAO,EAAC,cAAc;MAACnD,SAAS,EAAC,SAAS;MAAAC,QAAA,EAAEwC;IAAW;MAAA/B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eACvEhE,OAAA;MACEoE,IAAI,EAAC,QAAQ;MACb7D,EAAE,EAAC,cAAc;MACjB8F,KAAK,EAAEP,UAAW;MAClBS,QAAQ,EAAEL,YAAa;MACvBN,WAAW,EAAEA,WAAY;MACzBzC,SAAS,EAAC;IAAsJ;MAAAU,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjK,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA6B,EAAA,CArCSH,SAAS;AAAAc,GAAA,GAATd,SAAS;AA4ClB,SAASe,SAASA,CAAC;EAAEC,OAAO;EAAEC,aAAa;EAAEC;AAAY,CAAC,EAAE;EAAAC,GAAA;EAC1D;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGpH,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACsB,QAAQ,EAAE+F,WAAW,CAAC,GAAGrH,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACgF,IAAI,EAAEsC,OAAO,CAAC,GAAGtH,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;;EAE1C;AACF;AACA;AACA;EACE,MAAMuH,YAAY,GAAG,MAAOnE,CAAC,IAAK;IAChCA,CAAC,CAACoE,cAAc,CAAC,CAAC,CAAC,CAAC;IACpBR,aAAa,CAAC,EAAE,CAAC,CAAC,CAAC;;IAEnB;IACA,IAAI,CAACG,QAAQ,IAAI,CAAC7F,QAAQ,EAAE;MAC1B0F,aAAa,CAAC,qCAAqC,CAAC;MACpD;IACF;;IAEA;IACAD,OAAO,CAACI,QAAQ,EAAE7F,QAAQ,EAAE0D,IAAI,CAAC;EACnC,CAAC;EAED,oBACE3E,OAAA;IAAKmD,SAAS,EAAC,oHAAoH;IAAAC,QAAA,eACjIpD,OAAA;MAAKmD,SAAS,EAAC,6HAA6H;MAAAC,QAAA,gBAC1IpD,OAAA;QAAImD,SAAS,EAAC,mEAAmE;QAAAC,QAAA,EAAC;MAAoB;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC3GhE,OAAA;QAAMoH,QAAQ,EAAEF,YAAa;QAACG,UAAU;QAAAjE,QAAA,gBAEtCpD,OAAA;UAAKmD,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5BpD,OAAA;YAAOsG,OAAO,EAAC,UAAU;YAACnD,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAAQ;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACnGhE,OAAA;YACEoE,IAAI,EAAC,MAAM;YACX7D,EAAE,EAAC,UAAU;YACb8F,KAAK,EAAES,QAAS;YAChBP,QAAQ,EAAGxD,CAAC,IAAKgE,WAAW,CAAChE,CAAC,CAACqD,MAAM,CAACC,KAAK,CAAE;YAC7CiB,QAAQ;YACRnE,SAAS,EAAC,mJAAmJ;YAC7JyC,WAAW,EAAC,uBAAuB;YACnC,oBAAiB;UAAgB;YAAA/B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEC,CAAC,eAGNhE,OAAA;UAAKmD,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5BpD,OAAA;YAAOsG,OAAO,EAAC,UAAU;YAACnD,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAAQ;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACnGhE,OAAA;YACEoE,IAAI,EAAC,UAAU;YACf7D,EAAE,EAAC,UAAU;YACb8F,KAAK,EAAEpF,QAAS;YAChBsF,QAAQ,EAAGxD,CAAC,IAAKiE,WAAW,CAACjE,CAAC,CAACqD,MAAM,CAACC,KAAK,CAAE;YAC7CiB,QAAQ;YACRnE,SAAS,EAAC,mJAAmJ;YAC7JyC,WAAW,EAAC,gBAAgB;YAC5B,oBAAiB;UAAgB;YAAA/B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAGNhE,OAAA;UAAKmD,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACnBpD,OAAA;YAAOsG,OAAO,EAAC,MAAM;YAACnD,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAAQ;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC/FhE,OAAA;YACEO,EAAE,EAAC,MAAM;YACT8F,KAAK,EAAE1B,IAAK;YACZ4B,QAAQ,EAAGxD,CAAC,IAAKkE,OAAO,CAAClE,CAAC,CAACqD,MAAM,CAACC,KAAK,CAAE;YACzClD,SAAS,EAAC,iJAAiJ,CAAC;YAAA;YAAAC,QAAA,gBAE5JpD,OAAA;cAAQqG,KAAK,EAAC,MAAM;cAAAjD,QAAA,EAAC;YAAI;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAClChE,OAAA;cAAQqG,KAAK,EAAC,OAAO;cAAAjD,QAAA,EAAC;YAAK;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEN,CAAC,eAGNhE,OAAA;UACEoE,IAAI,EAAC,QAAQ;UACbiB,QAAQ,EAAEuB,WAAY,CAAC;UAAA;UACvBzD,SAAS,EAAC,uMAAuM;UAAAC,QAAA,EAEhNwD,WAAW,gBACV5G,OAAA,CAAAE,SAAA;YAAAkD,QAAA,gBACEpD,OAAA;cAAKmD,SAAS,EAAC,4CAA4C;cAACE,KAAK,EAAC,4BAA4B;cAACC,IAAI,EAAC,MAAM;cAACC,OAAO,EAAC,WAAW;cAAAH,QAAA,gBAC5HpD,OAAA;gBAAQmD,SAAS,EAAC,YAAY;gBAACK,EAAE,EAAC,IAAI;gBAACC,EAAE,EAAC,IAAI;gBAACC,CAAC,EAAC,IAAI;gBAACC,MAAM,EAAC,cAAc;gBAACC,WAAW,EAAC;cAAG;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC,eACrGhE,OAAA;gBAAMmD,SAAS,EAAC,YAAY;gBAACG,IAAI,EAAC,cAAc;gBAACW,CAAC,EAAC;cAAiH;gBAAAJ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzK,CAAC,iBAER;UAAA,eAAE,CAAC,GAEH;QACD;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA6C,GAAA,CAnGSJ,SAAS;AAAAc,GAAA,GAATd,SAAS;AA8GlB,SAASe,QAAQA,CAAC;EAAEC,IAAI;EAAEC,QAAQ;EAAEC,eAAe;EAAEC,QAAQ;EAAEC,QAAQ;EAAEC,UAAU;EAAEC;AAAa,CAAC,EAAE;EACnG;EACA,MAAMC,uBAAuB,GAAGP,IAAI,CAAC7G,UAAU,KAAK+G,eAAe;EACnE,MAAMM,iBAAiB,GAAGR,IAAI,CAAC7G,UAAU,IAAI,CAACoH,uBAAuB;EACrE,MAAME,WAAW,GAAG,CAACT,IAAI,CAAC7G,UAAU,IAAI,CAAC6G,IAAI,CAAC5G,WAAW;;EAEzD;EACA,MAAMsH,SAAS,GAAGT,QAAQ,KAAK,MAAM,IAAIQ,WAAW;EACpD,MAAME,SAAS,GAAGV,QAAQ,KAAK,MAAM,IAAIM,uBAAuB;EAChE,MAAMK,WAAW,GAAGX,QAAQ,KAAK,MAAM,IAAI,CAACD,IAAI,CAAC5G,WAAW,CAAC,CAAC;;EAE9D;EACA,MAAMyH,gBAAgB,GAAIvF,CAAC,IAAK;IAC9BA,CAAC,CAACqD,MAAM,CAACmC,OAAO,GAAG,IAAI,CAAC,CAAC;IACzBxF,CAAC,CAACqD,MAAM,CAACoC,GAAG,GAAGnI,qBAAqB;EACtC,CAAC;EAED,oBACEL,OAAA;IACEmD,SAAS,EAAE;AACjB,yBAAyBsE,IAAI,CAAC7G,UAAU,GAAG,gCAAgC,GAAG,EAAE;AAChF,yBAAyB6G,IAAI,CAAC5G,WAAW,GAAG,4BAA4B,GAAG,+CAA+C;AAC1H,yBAAyBkH,YAAY,GAAG,eAAe,GAAG,EAAE,EAAG,CAAC;IAAA;IAAA3E,QAAA,gBAG1DpD,OAAA;MAAKmD,SAAS,EAAC,qDAAqD;MAAAC,QAAA,GACjEqE,IAAI,CAAC7G,UAAU,iBACdZ,OAAA;QAAMmD,SAAS,EAAE,yCAAyC6E,uBAAuB,GAAG,eAAe,GAAG,eAAe,oBAAqB;QAAA5E,QAAA,GAAC,UACjI,EAAC6E,iBAAiB,GAAG,OAAOR,IAAI,CAAC7G,UAAU,EAAE,GAAG,EAAE;MAAA;QAAAiD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtD,CACP,EACAyD,IAAI,CAAC5G,WAAW,iBACfb,OAAA;QAAMmD,SAAS,EAAC,sEAAsE;QAAAC,QAAA,EAAC;MAEvF;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CACP;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAGNhE,OAAA;MAAKmD,SAAS,EAAC,6BAA6B;MAAAC,QAAA,eAC1CpD,OAAA;QACEwI,GAAG,EAAEf,IAAI,CAAC/G,QAAQ,IAAIL,qBAAsB;QAC5CoI,GAAG,EAAE,YAAYhB,IAAI,CAACjH,KAAK,EAAG;QAC9B2C,SAAS,EAAC,4BAA4B;QACtCuF,OAAO,EAAEJ,gBAAiB;QAC1BK,OAAO,EAAC,MAAM,CAAC;MAAA;QAAA9E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAGNhE,OAAA;MAAKmD,SAAS,EAAC,6BAA6B;MAAAC,QAAA,gBAC1CpD,OAAA;QAAImD,SAAS,EAAC,qDAAqD;QAAC3C,KAAK,EAAEiH,IAAI,CAACjH,KAAM;QAAA4C,QAAA,EAAEqE,IAAI,CAACjH;MAAK;QAAAqD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACxGhE,OAAA;QAAGmD,SAAS,EAAC,qCAAqC;QAAC3C,KAAK,EAAE,MAAMiH,IAAI,CAAChH,MAAM,EAAG;QAAA2C,QAAA,GAAC,KAAG,EAACqE,IAAI,CAAChH,MAAM;MAAA;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACnGhE,OAAA;QAAGmD,SAAS,EAAC,uCAAuC;QAAAC,QAAA,EAAEqE,IAAI,CAAC9G;MAAK;QAAAkD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAGrEhE,OAAA;QAAKmD,SAAS,EAAC;MAAW;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,EAGhC0D,QAAQ,KAAK,MAAM,iBAClB1H,OAAA;QAAKmD,SAAS,EAAC,+DAA+D;QAAAC,QAAA,GAE3E+E,SAAS,iBACRnI,OAAA;UACE4E,OAAO,EAAEA,CAAA,KAAMgD,QAAQ,CAACH,IAAI,CAAClH,EAAE,CAAE;UACjC8E,QAAQ,EAAE0C,YAAa,CAAC;UAAA;UACxB5E,SAAS,EAAC,yKAAyK;UAAAC,QAAA,EAElL2E,YAAY,gBAAG/H,OAAA,CAACkD,cAAc;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,GAAG;QAAQ;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvC,CACT,EAEAoE,SAAS,iBACRpI,OAAA;UACE4E,OAAO,EAAEA,CAAA,KAAMiD,QAAQ,CAACJ,IAAI,CAAClH,EAAE,CAAE;UACjC8E,QAAQ,EAAE0C,YAAa;UACvB5E,SAAS,EAAC,+KAA+K;UAAAC,QAAA,EAExL2E,YAAY,gBAAG/H,OAAA,CAACkD,cAAc;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,GAAG;QAAQ;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvC,CACT,EAEAqE,WAAW,iBACVrI,OAAA;UACE4E,OAAO,EAAEA,CAAA,KAAMkD,UAAU,CAACL,IAAI,CAAClH,EAAE,CAAE;UACnC8E,QAAQ,EAAE0C,YAAa;UACvB5E,SAAS,EAAC,4KAA4K;UAAAC,QAAA,EAErL2E,YAAY,gBAAG/H,OAAA,CAACkD,cAAc;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,GAAG;QAAkB;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CACT,EAEA,CAACmE,SAAS,IAAI,CAACC,SAAS,IAAI,CAACC,WAAW,IAAI,CAACZ,IAAI,CAAC5G,WAAW,IAAIoH,iBAAiB,iBACjFjI,OAAA;UAAGmD,SAAS,EAAC,4CAA4C;UAAAC,QAAA,GAAC,wBAAsB,EAACqE,IAAI,CAAC7G,UAAU;QAAA;UAAAiD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CACrG,EACAyD,IAAI,CAAC5G,WAAW,iBACfb,OAAA;UAAGmD,SAAS,EAAC,2CAA2C;UAAAC,QAAA,EAAC;QAAiB;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAC9E;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA4E,GAAA,GAzGSpB,QAAQ;AAiHjB,SAASqB,aAAaA,CAAC;EAAEC,KAAK;EAAEC,MAAM;EAAEC,QAAQ;EAAEC;AAAiB,CAAC,EAAE;EACpE;EACA,MAAMX,gBAAgB,GAAIvF,CAAC,IAAK;IAC9BA,CAAC,CAACqD,MAAM,CAACmC,OAAO,GAAG,IAAI;IACvBxF,CAAC,CAACqD,MAAM,CAACoC,GAAG,GAAG,mDAAmD;EACpE,CAAC;EAED,IAAI,CAACM,KAAK,IAAIA,KAAK,CAACI,MAAM,KAAK,CAAC,EAAE;IAChC,oBAAOlJ,OAAA;MAAGmD,SAAS,EAAC,gCAAgC;MAAAC,QAAA,EAAC;IAAsC;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EACjG;EAEA,oBACEhE,OAAA;IAAKmD,SAAS,EAAC,6DAA6D;IAAAC,QAAA,eAC1EpD,OAAA;MAAOmD,SAAS,EAAC,wCAAwC;MAAAC,QAAA,gBAEvDpD,OAAA;QAAOmD,SAAS,EAAC,+DAA+D;QAAAC,QAAA,eAC9EpD,OAAA;UAAAoD,QAAA,gBACEpD,OAAA;YAAImJ,KAAK,EAAC,KAAK;YAAChG,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAAC;UAAK;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACrDhE,OAAA;YAAImJ,KAAK,EAAC,KAAK;YAAChG,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAK;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAChDhE,OAAA;YAAImJ,KAAK,EAAC,KAAK;YAAChG,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAM;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACjDhE,OAAA;YAAImJ,KAAK,EAAC,KAAK;YAAChG,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAK;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAChDhE,OAAA;YAAImJ,KAAK,EAAC,KAAK;YAAChG,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAW;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACtDhE,OAAA;YAAImJ,KAAK,EAAC,KAAK;YAAChG,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAS;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACpDhE,OAAA;YAAImJ,KAAK,EAAC,KAAK;YAAChG,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAU;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACrDhE,OAAA;YAAImJ,KAAK,EAAC,KAAK;YAAChG,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAO;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eAERhE,OAAA;QAAAoD,QAAA,EACG0F,KAAK,CAACxD,GAAG,CAAEmC,IAAI,iBACdzH,OAAA;UAAkBmD,SAAS,EAAE,4EAA4E8F,gBAAgB,KAAKxB,IAAI,CAAClH,EAAE,GAAG,0BAA0B,GAAG,EAAE,EAAG;UAAA6C,QAAA,gBAExKpD,OAAA;YAAImD,SAAS,EAAC,WAAW;YAAAC,QAAA,eACvBpD,OAAA;cACEwI,GAAG,EAAEf,IAAI,CAAC/G,QAAQ,IAAI,mDAAoD;cAC1E+H,GAAG,EAAE,aAAahB,IAAI,CAACjH,KAAK,EAAG;cAC/B2C,SAAS,EAAC,kCAAkC;cAC5CuF,OAAO,EAAEJ,gBAAiB;cAC1BK,OAAO,EAAC;YAAM;cAAA9E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,eAELhE,OAAA;YAAImJ,KAAK,EAAC,KAAK;YAAChG,SAAS,EAAC,oDAAoD;YAAAC,QAAA,EAAEqE,IAAI,CAACjH;UAAK;YAAAqD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAChGhE,OAAA;YAAImD,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAEqE,IAAI,CAAChH;UAAM;YAAAoD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAC5ChE,OAAA;YAAImD,SAAS,EAAC,sBAAsB;YAAAC,QAAA,EAAEqE,IAAI,CAAC9G;UAAK;YAAAkD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACtDhE,OAAA;YAAImD,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAEqE,IAAI,CAAC7G,UAAU,iBAAIZ,OAAA;cAAMmD,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAC;YAAS;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAC5GhE,OAAA;YAAImD,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAEqE,IAAI,CAAC5G,WAAW,gBAAGb,OAAA;cAAMmD,SAAS,EAAC,gBAAgB;cAAAC,QAAA,EAAC;YAAG;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,GAAG;UAAI;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACtGhE,OAAA;YAAImD,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAEZ,UAAU,CAACiF,IAAI,CAAC3G,SAAS;UAAC;YAAA+C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAE3DhE,OAAA;YAAImD,SAAS,EAAC,6BAA6B;YAAAC,QAAA,gBACzCpD,OAAA;cACE4E,OAAO,EAAEA,CAAA,KAAMmE,MAAM,CAACtB,IAAI,CAAE;cAC5BpC,QAAQ,EAAE4D,gBAAgB,KAAKxB,IAAI,CAAClH,EAAG,CAAC;cAAA;cACxC4C,SAAS,EAAC,mGAAmG;cAC7G,cAAY,QAAQsE,IAAI,CAACjH,KAAK,EAAG;cAAA4C,QAAA,EAClC;YAED;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACThE,OAAA;cACE4E,OAAO,EAAEA,CAAA,KAAMoE,QAAQ,CAACvB,IAAI,CAAClH,EAAE,CAAE;cACjC8E,QAAQ,EAAE4D,gBAAgB,KAAKxB,IAAI,CAAClH,EAAG;cACvC4C,SAAS,EAAC,6FAA6F;cACvG,cAAY,UAAUsE,IAAI,CAACjH,KAAK,EAAG;cAAA4C,QAAA,EACpC;YAED;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP,CAAC;QAAA,GApCEyD,IAAI,CAAClH,EAAE;UAAAsD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAqCZ,CACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPAoF,GAAA,GA3ESP,aAAa;AAmFtB,SAASQ,QAAQA,CAAC;EAAEC,WAAW;EAAElC,QAAQ;EAAEmC,gBAAgB;EAAEC;AAAa,CAAC,EAAE;EAAAC,GAAA;EAC3E;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGhK,QAAQ,CAAC;IACvCa,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE,EAAE;IACVC,QAAQ,EAAE,EAAE;IACZC,KAAK,EAAE,EAAE;IACT,GAAG2I,WAAW,CAAC;EACjB,CAAC,CAAC;EACF;EACA,MAAM,CAACM,MAAM,EAAEC,SAAS,CAAC,GAAGlK,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAExC;EACAC,SAAS,CAAC,MAAM;IACd+J,WAAW,CAAC;MACVnJ,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACT,GAAG2I;IACL,CAAC,CAAC;IACFO,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACjB,CAAC,EAAE,CAACP,WAAW,CAAC,CAAC;;EAEjB;AACF;AACA;AACA;EACE,MAAMpD,YAAY,GAAInD,CAAC,IAAK;IAC1B,MAAM;MAAE+G,IAAI;MAAEzD;IAAM,CAAC,GAAGtD,CAAC,CAACqD,MAAM;IAChCuD,WAAW,CAACI,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE,CAACD,IAAI,GAAGzD;IAAM,CAAC,CAAC,CAAC;IACjD;IACA,IAAIuD,MAAM,CAACE,IAAI,CAAC,EAAE;MAChBD,SAAS,CAACE,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAACD,IAAI,GAAG;MAAK,CAAC,CAAC,CAAC;IAChD;EACF,CAAC;;EAED;AACF;AACA;AACA;EACE,MAAME,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,SAAS,GAAG,CAAC,CAAC;IACpB,IAAI,CAACP,QAAQ,CAAClJ,KAAK,CAAC0J,IAAI,CAAC,CAAC,EAAED,SAAS,CAACzJ,KAAK,GAAG,oBAAoB;IAClE,IAAI,CAACkJ,QAAQ,CAACjJ,MAAM,CAACyJ,IAAI,CAAC,CAAC,EAAED,SAAS,CAACxJ,MAAM,GAAG,qBAAqB;IACrE,IAAI,CAACiJ,QAAQ,CAAC/I,KAAK,CAACuJ,IAAI,CAAC,CAAC,EAAED,SAAS,CAACtJ,KAAK,GAAG,oBAAoB;IAClE;IACA,IAAI+I,QAAQ,CAAChJ,QAAQ,CAACwJ,IAAI,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAACC,IAAI,CAACT,QAAQ,CAAChJ,QAAQ,CAAC,EAAE;MAC7EuJ,SAAS,CAACvJ,QAAQ,GAAG,8CAA8C;IACrE;IACAmJ,SAAS,CAACI,SAAS,CAAC;IACpB,OAAOG,MAAM,CAACC,IAAI,CAACJ,SAAS,CAAC,CAACf,MAAM,KAAK,CAAC,CAAC,CAAC;EAC9C,CAAC;;EAED;AACF;AACA;AACA;EACE,MAAMhC,YAAY,GAAInE,CAAC,IAAK;IAC1BA,CAAC,CAACoE,cAAc,CAAC,CAAC;IAClB,IAAI6C,YAAY,CAAC,CAAC,EAAE;MAClB5C,QAAQ,CAACsC,QAAQ,CAAC,CAAC,CAAC;IACtB;EACF,CAAC;;EAED;EACA,MAAMY,UAAU,GAAG,mJAAmJ;EACtK,MAAMC,UAAU,GAAG,6BAA6B,CAAC,CAAC;EAClD,MAAMC,iBAAiB,GAAG,2BAA2B;EAErD,oBACExK,OAAA;IAAMoH,QAAQ,EAAEF,YAAa;IAACG,UAAU;IAAAjE,QAAA,gBAEtCpD,OAAA;MAAKmD,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnBpD,OAAA;QAAOsG,OAAO,EAAC,YAAY;QAACnD,SAAS,EAAC,8CAA8C;QAAAC,QAAA,GAAC,QAAM,eAAApD,OAAA;UAAMmD,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAC;QAAC;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC1IhE,OAAA;QAAOoE,IAAI,EAAC,MAAM;QAAC7D,EAAE,EAAC,YAAY;QAACuJ,IAAI,EAAC,OAAO;QAACzD,KAAK,EAAEqD,QAAQ,CAAClJ,KAAM;QAAC+F,QAAQ,EAAEL,YAAa;QAACoB,QAAQ;QAACnE,SAAS,EAAE,GAAGmH,UAAU,IAAIV,MAAM,CAACpJ,KAAK,GAAG+J,UAAU,GAAG,EAAE,EAAG;QAAC,gBAAc,CAAC,CAACX,MAAM,CAACpJ,KAAM;QAAC,oBAAiB;MAAa;QAAAqD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACpO4F,MAAM,CAACpJ,KAAK,iBAAIR,OAAA;QAAGO,EAAE,EAAC,aAAa;QAAC4C,SAAS,EAAEqH,iBAAkB;QAAApH,QAAA,EAAEwG,MAAM,CAACpJ;MAAK;QAAAqD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClF,CAAC,eAENhE,OAAA;MAAKmD,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnBpD,OAAA;QAAOsG,OAAO,EAAC,aAAa;QAACnD,SAAS,EAAC,8CAA8C;QAAAC,QAAA,GAAC,SAAO,eAAApD,OAAA;UAAMmD,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAC;QAAC;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC5IhE,OAAA;QAAOoE,IAAI,EAAC,MAAM;QAAC7D,EAAE,EAAC,aAAa;QAACuJ,IAAI,EAAC,QAAQ;QAACzD,KAAK,EAAEqD,QAAQ,CAACjJ,MAAO;QAAC8F,QAAQ,EAAEL,YAAa;QAACoB,QAAQ;QAACnE,SAAS,EAAE,GAAGmH,UAAU,IAAIV,MAAM,CAACnJ,MAAM,GAAG8J,UAAU,GAAG,EAAE,EAAG;QAAC,gBAAc,CAAC,CAACX,MAAM,CAACnJ,MAAO;QAAC,oBAAiB;MAAc;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAC1O4F,MAAM,CAACnJ,MAAM,iBAAIT,OAAA;QAAGO,EAAE,EAAC,cAAc;QAAC4C,SAAS,EAAEqH,iBAAkB;QAAApH,QAAA,EAAEwG,MAAM,CAACnJ;MAAM;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrF,CAAC,eAENhE,OAAA;MAAKmD,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnBpD,OAAA;QAAOsG,OAAO,EAAC,eAAe;QAACnD,SAAS,EAAC,8CAA8C;QAAAC,QAAA,EAAC;MAAS;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACzGhE,OAAA;QAAOoE,IAAI,EAAC,MAAM;QAAC7D,EAAE,EAAC,eAAe;QAACuJ,IAAI,EAAC,UAAU;QAACzD,KAAK,EAAEqD,QAAQ,CAAChJ,QAAS;QAAC6F,QAAQ,EAAEL,YAAa;QAACN,WAAW,EAAC,8BAA8B;QAACzC,SAAS,EAAE,GAAGmH,UAAU,IAAIV,MAAM,CAAClJ,QAAQ,GAAG6J,UAAU,GAAG,EAAE,EAAG;QAAC,gBAAc,CAAC,CAACX,MAAM,CAAClJ,QAAS;QAAC,oBAAiB;MAAgB;QAAAmD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACxR4F,MAAM,CAAClJ,QAAQ,iBAAIV,OAAA;QAAGO,EAAE,EAAC,gBAAgB;QAAC4C,SAAS,EAAEqH,iBAAkB;QAAApH,QAAA,EAAEwG,MAAM,CAAClJ;MAAQ;QAAAmD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3F,CAAC,eAENhE,OAAA;MAAKmD,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnBpD,OAAA;QAAOsG,OAAO,EAAC,YAAY;QAACnD,SAAS,EAAC,8CAA8C;QAAAC,QAAA,GAAC,QAAM,eAAApD,OAAA;UAAMmD,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAC;QAAC;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC1IhE,OAAA;QAAOoE,IAAI,EAAC,MAAM;QAAC7D,EAAE,EAAC,YAAY;QAACuJ,IAAI,EAAC,OAAO;QAACzD,KAAK,EAAEqD,QAAQ,CAAC/I,KAAM;QAAC4F,QAAQ,EAAEL,YAAa;QAACoB,QAAQ;QAACnE,SAAS,EAAE,GAAGmH,UAAU,IAAIV,MAAM,CAACjJ,KAAK,GAAG4J,UAAU,GAAG,EAAE,EAAG;QAAC,gBAAc,CAAC,CAACX,MAAM,CAACjJ,KAAM;QAAC,oBAAiB;MAAa;QAAAkD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACpO4F,MAAM,CAACjJ,KAAK,iBAAIX,OAAA;QAAGO,EAAE,EAAC,aAAa;QAAC4C,SAAS,EAAEqH,iBAAkB;QAAApH,QAAA,EAAEwG,MAAM,CAACjJ;MAAK;QAAAkD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClF,CAAC,eAGNhE,OAAA;MAAKmD,SAAS,EAAC,uBAAuB;MAAAC,QAAA,eACpCpD,OAAA;QACEoE,IAAI,EAAC,QAAQ;QACbiB,QAAQ,EAAEmE,YAAa,CAAC;QAAA;QACxBrG,SAAS,EAAC,8MAA8M,CAAC;QAAA;QAAAC,QAAA,EAExNoG,YAAY,gBAAGxJ,OAAA,CAACkD,cAAc;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,GAAGuF;MAAgB;QAAA1F,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/C;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEX;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPAyF,GAAA,CAhHSJ,QAAQ;AAAAoB,GAAA,GAARpB,QAAQ;AAwHjB,SAASqB,KAAKA,CAAC;EAAEC,MAAM;EAAEC,OAAO;EAAEpK,KAAK;EAAE4C;AAAS,CAAC,EAAE;EAAAyH,GAAA;EACnD;EACAjL,SAAS,CAAC,MAAM;IACd,MAAMkL,SAAS,GAAI3E,KAAK,IAAK;MAC3B,IAAIA,KAAK,CAAC4E,GAAG,KAAK,QAAQ,EAAE;QAC1BH,OAAO,CAAC,CAAC;MACX;IACF,CAAC;IACD,IAAID,MAAM,EAAE;MACVK,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEH,SAAS,CAAC;IAC/C;IACA;IACA,OAAO,MAAM;MACXE,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEJ,SAAS,CAAC;IAClD,CAAC;EACH,CAAC,EAAE,CAACH,MAAM,EAAEC,OAAO,CAAC,CAAC;EAErB,IAAI,CAACD,MAAM,EAAE,OAAO,IAAI,CAAC,CAAC;;EAE1B;IAAA;IACE;IACA3K,OAAA;MACEmD,SAAS,EAAC,gHAAgH;MAC1HyB,OAAO,EAAEgG,OAAQ,CAAC;MAAA;MAClBjG,IAAI,EAAC,QAAQ;MACb,cAAW,MAAM;MACjB,mBAAgB,aAAa;MAAAvB,QAAA,eAG7BpD,OAAA;QACEmD,SAAS,EAAC,8HAA8H;QACxIyB,OAAO,EAAG7B,CAAC,IAAKA,CAAC,CAACoI,eAAe,CAAC,CAAE,CAAC;QAAA;QAAA/H,QAAA,gBAGrCpD,OAAA;UAAKmD,SAAS,EAAC,sEAAsE;UAAAC,QAAA,gBACnFpD,OAAA;YAAIO,EAAE,EAAC,aAAa;YAAC4C,SAAS,EAAC,oCAAoC;YAAAC,QAAA,EAAE5C;UAAK;YAAAqD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAChFhE,OAAA;YACE4E,OAAO,EAAEgG,OAAQ;YACjBzH,SAAS,EAAC,gEAAgE;YAC1E,cAAW,aAAa;YAAAC,QAAA,EACzB;UAED;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAENhE,OAAA;UAAAoD,QAAA,EACGA;QAAQ;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;AAEV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA6G,GAAA,CArDSH,KAAK;AAAAU,GAAA,GAALV,KAAK;AA6Dd,SAASW,aAAaA,CAAC;EAAEV,MAAM;EAAEC,OAAO;EAAEU,SAAS;EAAE9B;AAAa,CAAC,EAAE;EACnE;AACF;AACA;AACA;EACE,MAAM+B,eAAe,GAAI7B,QAAQ,IAAK;IACpC,MAAM8B,OAAO,GAAG;MACdjL,EAAE,EAAE0B,UAAU,CAAC,CAAC;MAAE;MAClB,GAAGyH,QAAQ;MAAE;MACb9I,UAAU,EAAE,IAAI;MAAE;MAClBC,WAAW,EAAE,KAAK;MAAE;MACpBC,SAAS,EAAE,IAAIoB,IAAI,CAAC,CAAC,CAACuJ,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAE;IACrD,CAAC;IACDJ,SAAS,CAACE,OAAO,CAAC,CAAC,CAAC;EACtB,CAAC;EAED,oBACExL,OAAA,CAAC0K,KAAK;IAACC,MAAM,EAAEA,MAAO;IAACC,OAAO,EAAEA,OAAQ;IAACpK,KAAK,EAAC,cAAc;IAAA4C,QAAA,eAC3DpD,OAAA,CAACqJ,QAAQ;MACPjC,QAAQ,EAAEmE,eAAgB;MAC1BhC,gBAAgB,EAAC,UAAU;MAC3BC,YAAY,EAAEA;MAChB;IAAA;MAAA3F,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CAAC;AAEZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA2H,IAAA,GA5BSN,aAAa;AAqCtB,SAASO,cAAcA,CAAC;EAAEjB,MAAM;EAAEC,OAAO;EAAEiB,UAAU;EAAEC,UAAU;EAAEtC;AAAa,CAAC,EAAE;EACjF;AACF;AACA;AACA;EACE,MAAMuC,gBAAgB,GAAIrC,QAAQ,IAAK;IACrC,IAAI,CAACoC,UAAU,EAAE,OAAO,CAAC;IACzB;IACA,MAAME,WAAW,GAAG;MAClB,GAAGF,UAAU;MACb,GAAGpC,QAAQ,CAAE;IACf,CAAC;IACDmC,UAAU,CAACG,WAAW,CAAC,CAAC,CAAC;EAC3B,CAAC;EAED,oBACEhM,OAAA,CAAC0K,KAAK;IAACC,MAAM,EAAEA,MAAM,IAAI,CAAC,CAACmB,UAAW;IAAClB,OAAO,EAAEA,OAAQ;IAACpK,KAAK,EAAC,mBAAmB;IAAA4C,QAAA,EAC/E0I,UAAU;IAAA;IAAM;IACf9L,OAAA,CAACqJ,QAAQ;MACPC,WAAW,EAAE;QAAE;QACb9I,KAAK,EAAEsL,UAAU,CAACtL,KAAK;QACvBC,MAAM,EAAEqL,UAAU,CAACrL,MAAM;QACzBC,QAAQ,EAAEoL,UAAU,CAACpL,QAAQ,IAAI,EAAE;QACnCC,KAAK,EAAEmL,UAAU,CAACnL;MACpB,CAAE;MACFyG,QAAQ,EAAE2E,gBAAiB;MAC3BxC,gBAAgB,EAAC,cAAc;MAC/BC,YAAY,EAAEA;IAAa;MAAA3F,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5B;EACF;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACI,CAAC;AAEZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AALAiI,IAAA,GAlCSL,cAAc;AAwCvB,SAASM,SAASA,CAAC;EAAEC,YAAY;EAAEC;AAAS,CAAC,EAAE;EAC7C,oBACEpM,OAAA;IAAQmD,SAAS,EAAC,kEAAkE;IAAAC,QAAA,eAClFpD,OAAA;MAAKmD,SAAS,EAAC,wDAAwD;MAAAC,QAAA,gBAErEpD,OAAA;QAAAoD,QAAA,gBACEpD,OAAA;UAAImD,SAAS,EAAC,+DAA+D;UAAAC,QAAA,EAAC;QAE9E;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACJmI,YAAY,iBACXnM,OAAA;UAAGmD,SAAS,EAAC,4BAA4B;UAAAC,QAAA,GAAC,WAC/B,eAAApD,OAAA;YAAMmD,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAE+I,YAAY,CAACjL,QAAQ,IAAIiL,YAAY,CAACrF;UAAQ;YAAAjD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,MAAE,EAACmI,YAAY,CAACxH,IAAI,EAAC,GACvH;QAAA;UAAAd,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CACJ;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EAELmI,YAAY,iBACXnM,OAAA;QACE4E,OAAO,EAAEwH,QAAS;QAClBjJ,SAAS,EAAC,wHAAwH;QAAAC,QAAA,EACnI;MAED;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEb;;AAGA;AAAAqI,IAAA,GA9BSH,SAAS;AA+BlB,SAASI,GAAGA,CAAA,EAAG;EAAAC,GAAA;EACb;;EAEA;EACA,MAAM,CAACJ,YAAY,EAAEK,eAAe,CAAC,GAAG7M,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EACxD,MAAM,CAACiH,WAAW,EAAE6F,cAAc,CAAC,GAAG9M,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACvD,MAAM,CAAC+M,UAAU,EAAE/F,aAAa,CAAC,GAAGhH,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAElD;EACA,MAAM,CAACgN,QAAQ,EAAEC,WAAW,CAAC,GAAGjN,QAAQ,CAACW,YAAY,CAAC,CAAC,CAAC;EACxD,MAAM,CAACuM,aAAa,EAAEC,gBAAgB,CAAC,GAAGnN,QAAQ,CAACW,YAAY,CAAC,CAAC,CAAC;;EAElE;EACA,MAAM,CAACyM,aAAa,EAAEC,gBAAgB,CAAC,GAAGrN,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EAC3D,MAAM,CAACsN,aAAa,EAAEC,gBAAgB,CAAC,GAAGvN,QAAQ,CAAC;IAAEyE,IAAI,EAAE,EAAE;IAAE+I,IAAI,EAAE;EAAG,CAAC,CAAC,CAAC,CAAC;EAC5E,MAAM,CAAClE,gBAAgB,EAAEmE,mBAAmB,CAAC,GAAGzN,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAEhE;EACA,MAAM,CAAC0N,aAAa,EAAEC,gBAAgB,CAAC,GAAG3N,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC4N,cAAc,EAAEC,iBAAiB,CAAC,GAAG7N,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACmM,UAAU,EAAE2B,aAAa,CAAC,GAAG9N,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAAC+N,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGhO,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;;EAErE;EACA,MAAM,CAACmG,UAAU,EAAEC,aAAa,CAAC,GAAGpG,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACoF,WAAW,EAAE6I,cAAc,CAAC,GAAGjO,QAAQ,CAAC,CAAC,CAAC;;EAEjD;;EAEA;EACA,MAAMkO,mBAAmB,GAAG/N,OAAO,CAAC,MAAM;IACxC,IAAI,CAACgG,UAAU,EAAE;MACf,OAAO6G,QAAQ,CAAC,CAAC;IACnB;IACA,MAAMmB,mBAAmB,GAAGhI,UAAU,CAACiI,WAAW,CAAC,CAAC;IACpD,OAAOpB,QAAQ,CAACqB,MAAM,CAACvG,IAAI,IACzBA,IAAI,CAACjH,KAAK,CAACuN,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACH,mBAAmB,CAAC,IACtDrG,IAAI,CAAChH,MAAM,CAACsN,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACH,mBAAmB,CAAC,IACvDrG,IAAI,CAAC9G,KAAK,CAACoN,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACH,mBAAmB,CACvD,CAAC;EACH,CAAC,EAAE,CAACnB,QAAQ,EAAE7G,UAAU,CAAC,CAAC,CAAC,CAAC;;EAE5B;EACA,MAAMd,UAAU,GAAGlF,OAAO,CAAC,MAAM;IAC/B,OAAOsC,IAAI,CAAC8L,IAAI,CAACL,mBAAmB,CAAC3E,MAAM,GAAG/I,cAAc,CAAC;EAC/D,CAAC,EAAE,CAAC0N,mBAAmB,CAAC3E,MAAM,CAAC,CAAC,CAAC,CAAC;;EAElC;EACA,MAAMiF,cAAc,GAAGrO,OAAO,CAAC,MAAM;IACnC,MAAMsO,UAAU,GAAG,CAACrJ,WAAW,GAAG,CAAC,IAAI5E,cAAc;IACrD,MAAMkO,QAAQ,GAAGD,UAAU,GAAGjO,cAAc;IAC5C,OAAO0N,mBAAmB,CAACS,KAAK,CAACF,UAAU,EAAEC,QAAQ,CAAC;EACxD,CAAC,EAAE,CAACR,mBAAmB,EAAE9I,WAAW,CAAC,CAAC,CAAC,CAAC;;EAExC;;EAEA;EACAnF,SAAS,CAAC,MAAM;IACd,IAAIqN,aAAa,CAACE,IAAI,EAAE;MACtB,MAAMoB,KAAK,GAAGvM,UAAU,CAAC,MAAM;QAC7BkL,gBAAgB,CAAC;UAAE9I,IAAI,EAAE,EAAE;UAAE+I,IAAI,EAAE;QAAG,CAAC,CAAC;MAC1C,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;MACV,OAAO,MAAMlH,YAAY,CAACsI,KAAK,CAAC,CAAC,CAAC;IACpC;EACF,CAAC,EAAE,CAACtB,aAAa,CAAC,CAAC;;EAEnB;EACArN,SAAS,CAAC,MAAM;IACdgO,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;EACrB,CAAC,EAAE,CAAC9H,UAAU,CAAC,CAAC;;EAEhB;EACAlG,SAAS,CAAC,MAAM;IACd,IAAImF,WAAW,GAAGC,UAAU,IAAIA,UAAU,GAAG,CAAC,EAAE;MAC9C4I,cAAc,CAAC5I,UAAU,CAAC,CAAC,CAAC;IAC9B;IACA;IACA,IAAIA,UAAU,KAAK,CAAC,IAAID,WAAW,KAAK,CAAC,EAAE;MACzC6I,cAAc,CAAC,CAAC,CAAC;IACnB;EACF,CAAC,EAAE,CAAC5I,UAAU,EAAED,WAAW,CAAC,CAAC;;EAG7B;;EAEA;AACF;AACA;AACA;AACA;EACE,MAAMyJ,iBAAiB,GAAGA,CAACpK,IAAI,EAAE+I,IAAI,KAAK;IACxCD,gBAAgB,CAAC;MAAE9I,IAAI;MAAE+I;IAAK,CAAC,CAAC;EAClC,CAAC;;EAED;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE,MAAMsB,WAAW,GAAG5O,WAAW,CAAC,OAAOiH,QAAQ,EAAE7F,QAAQ,EAAE0D,IAAI,KAAK;IAClE8H,cAAc,CAAC,IAAI,CAAC;IACpB9F,aAAa,CAAC,EAAE,CAAC,CAAC,CAAC;;IAEnB,MAAMhF,eAAe,CAAC,MAAM;MAC1B,IAAI+M,IAAI,GAAG,IAAI;MACf,IAAI/J,IAAI,KAAK,OAAO,EAAE;QACpB,IAAImC,QAAQ,KAAK,OAAO,IAAI7F,QAAQ,KAAKF,oBAAoB,CAACC,KAAK,CAACC,QAAQ,EAAE;UAC5EyN,IAAI,GAAG;YAAE5H,QAAQ,EAAE,OAAO;YAAEnC,IAAI,EAAE,OAAO;YAAE,GAAG5D,oBAAoB,CAACC;UAAM,CAAC;QAC5E;MACF,CAAC,MAAM;QAAE;QACP,MAAM2N,QAAQ,GAAG5N,oBAAoB,CAACK,KAAK,CAAC0F,QAAQ,CAAC;QACrD,IAAI6H,QAAQ,IAAIA,QAAQ,CAAC1N,QAAQ,KAAKA,QAAQ,EAAE;UAC9CyN,IAAI,GAAG;YAAE5H,QAAQ;YAAEnC,IAAI,EAAE,MAAM;YAAE,GAAGgK;UAAS,CAAC;QAChD;MACF;MAEA,IAAID,IAAI,EAAE;QACRlC,eAAe,CAACkC,IAAI,CAAC;QACrBF,iBAAiB,CAAC,SAAS,EAAE,iBAAiBE,IAAI,CAACxN,QAAQ,IAAIwN,IAAI,CAAC5H,QAAQ,GAAG,CAAC;MAClF,CAAC,MAAM;QACLH,aAAa,CAAC,sCAAsC,CAAC,CAAC,CAAC;MACzD;IACF,CAAC,CAAC;IAEF8F,cAAc,CAAC,KAAK,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;EAER;EACA,MAAMmC,YAAY,GAAG/O,WAAW,CAAC,MAAM;IACrC2M,eAAe,CAAC,IAAI,CAAC;IACrBzG,aAAa,CAAC,EAAE,CAAC,CAAC,CAAC;IACnB6H,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;IACnBY,iBAAiB,CAAC,MAAM,EAAE,2BAA2B,CAAC;EACxD,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;EAER;;EAEA;EACA,MAAMK,aAAa,GAAGhP,WAAW,CAAC,MAAO2L,OAAO,IAAK;IACnDmC,qBAAqB,CAAC,IAAI,CAAC;IAC3BX,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC;IACxB,MAAMrL,eAAe,CAAC,MAAM;MAC1BiL,WAAW,CAACkC,SAAS,IAAI,CAAC,GAAGA,SAAS,EAAEtD,OAAO,CAAC,CAACuD,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACxO,KAAK,CAAC0O,aAAa,CAACD,CAAC,CAACzO,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MAClG8M,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC;MACzBkB,iBAAiB,CAAC,SAAS,EAAE,SAAShD,OAAO,CAAChL,KAAK,uBAAuB,CAAC;IAC7E,CAAC,CAAC;IACFmN,qBAAqB,CAAC,KAAK,CAAC;IAC5BX,gBAAgB,CAAC,KAAK,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMmC,cAAc,GAAGtP,WAAW,CAAC,MAAOmM,WAAW,IAAK;IACxD2B,qBAAqB,CAAC,IAAI,CAAC;IAC3BX,gBAAgB,CAAC,IAAI,CAAC;IACtBI,mBAAmB,CAACpB,WAAW,CAACzL,EAAE,CAAC,CAAC,CAAC;IACrC,MAAMoB,eAAe,CAAC,MAAM;MAC1BiL,WAAW,CAACkC,SAAS,IACnBA,SAAS,CAACxJ,GAAG,CAACmC,IAAI,IAAKA,IAAI,CAAClH,EAAE,KAAKyL,WAAW,CAACzL,EAAE,GAAGyL,WAAW,GAAGvE,IAAK,CAAC,CACrEsH,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACxO,KAAK,CAAC0O,aAAa,CAACD,CAAC,CAACzO,KAAK,CAAC,CAAC,CAAC;MACpD,CAAC;MACDgN,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;MAC1BC,aAAa,CAAC,IAAI,CAAC;MACnBe,iBAAiB,CAAC,SAAS,EAAE,SAASxC,WAAW,CAACxL,KAAK,yBAAyB,CAAC;IACnF,CAAC,CAAC;IACFmN,qBAAqB,CAAC,KAAK,CAAC;IAC5BX,gBAAgB,CAAC,KAAK,CAAC;IACvBI,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC;EAC7B,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMgC,gBAAgB,GAAGvP,WAAW,CAAC,MAAOwP,MAAM,IAAK;IACrD;IACA,MAAMC,YAAY,GAAG3C,QAAQ,CAAC4C,IAAI,CAACN,CAAC,IAAIA,CAAC,CAAC1O,EAAE,KAAK8O,MAAM,CAAC;IACxD,IAAI,CAACC,YAAY,EAAE,OAAO,CAAC;;IAE3B,IAAI,CAACtE,MAAM,CAACwE,OAAO,CAAC,gDAAgDF,YAAY,CAAC9O,KAAK,IAAI,CAAC,EAAE;MAC3F,OAAO,CAAC;IACV;IAEAwM,gBAAgB,CAAC,IAAI,CAAC;IACtBI,mBAAmB,CAACiC,MAAM,CAAC,CAAC,CAAC;IAC7B,MAAM1N,eAAe,CAAC,MAAM;MAC1BiL,WAAW,CAACkC,SAAS,IAAIA,SAAS,CAACd,MAAM,CAACvG,IAAI,IAAIA,IAAI,CAAClH,EAAE,KAAK8O,MAAM,CAAC,CAAC;MACtEb,iBAAiB,CAAC,SAAS,EAAE,SAASc,YAAY,CAAC9O,KAAK,yBAAyB,CAAC;MAClF;IACF,CAAC,CAAC;IACFwM,gBAAgB,CAAC,KAAK,CAAC;IACvBI,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC;EAC7B,CAAC,EAAE,CAACT,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAEhB;;EAEA;EACA,MAAM8C,gBAAgB,GAAG5P,WAAW,CAAC,MAAOwP,MAAM,IAAK;IACrD,IAAI,CAAClD,YAAY,IAAIA,YAAY,CAACxH,IAAI,KAAK,MAAM,EAAE;IACnD,MAAM+K,YAAY,GAAG/C,QAAQ,CAAC4C,IAAI,CAACN,CAAC,IAAIA,CAAC,CAAC1O,EAAE,KAAK8O,MAAM,CAAC;IACxD,IAAI,CAACK,YAAY,IAAIA,YAAY,CAAC9O,UAAU,IAAI8O,YAAY,CAAC7O,WAAW,EAAE;MACxE2N,iBAAiB,CAAC,OAAO,EAAE,uCAAuC,CAAC;MACnE;IACF;IAEAxB,gBAAgB,CAAC,IAAI,CAAC;IACtBI,mBAAmB,CAACiC,MAAM,CAAC;IAC3B,MAAM1N,eAAe,CAAC,MAAM;MAC1BiL,WAAW,CAACkC,SAAS,IACnBA,SAAS,CAACxJ,GAAG,CAACmC,IAAI,IAChBA,IAAI,CAAClH,EAAE,KAAK8O,MAAM,GAAG;QAAE,GAAG5H,IAAI;QAAE7G,UAAU,EAAEuL,YAAY,CAACrF;MAAS,CAAC,GAAGW,IACxE,CACF,CAAC;MACD+G,iBAAiB,CAAC,SAAS,EAAE,sBAAsBkB,YAAY,CAAClP,KAAK,IAAI,CAAC;IAC5E,CAAC,CAAC;IACFwM,gBAAgB,CAAC,KAAK,CAAC;IACvBI,mBAAmB,CAAC,IAAI,CAAC;EAC3B,CAAC,EAAE,CAACjB,YAAY,EAAEQ,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAE9B;EACA,MAAMgD,gBAAgB,GAAG9P,WAAW,CAAC,MAAOwP,MAAM,IAAK;IACrD,IAAI,CAAClD,YAAY,IAAIA,YAAY,CAACxH,IAAI,KAAK,MAAM,EAAE;IACnD,MAAMiL,YAAY,GAAGjD,QAAQ,CAAC4C,IAAI,CAACN,CAAC,IAAIA,CAAC,CAAC1O,EAAE,KAAK8O,MAAM,CAAC;IACxD,IAAI,CAACO,YAAY,IAAIA,YAAY,CAAChP,UAAU,KAAKuL,YAAY,CAACrF,QAAQ,EAAE;MACtE0H,iBAAiB,CAAC,OAAO,EAAE,8BAA8B,CAAC;MAC1D;IACF;IAEAxB,gBAAgB,CAAC,IAAI,CAAC;IACtBI,mBAAmB,CAACiC,MAAM,CAAC;IAC3B,MAAM1N,eAAe,CAAC,MAAM;MAC1BiL,WAAW,CAACkC,SAAS,IACnBA,SAAS,CAACxJ,GAAG,CAACmC,IAAI,IAChBA,IAAI,CAAClH,EAAE,KAAK8O,MAAM,GAAG;QAAE,GAAG5H,IAAI;QAAE7G,UAAU,EAAE;MAAK,CAAC,GAAG6G,IACvD,CACF,CAAC;MACD+G,iBAAiB,CAAC,SAAS,EAAE,sBAAsBoB,YAAY,CAACpP,KAAK,IAAI,CAAC;IAC5E,CAAC,CAAC;IACFwM,gBAAgB,CAAC,KAAK,CAAC;IACvBI,mBAAmB,CAAC,IAAI,CAAC;EAC3B,CAAC,EAAE,CAACjB,YAAY,EAAEQ,QAAQ,CAAC,CAAC;;EAE5B;EACA,MAAMkD,kBAAkB,GAAGhQ,WAAW,CAAC,MAAOwP,MAAM,IAAK;IACvD,IAAI,CAAClD,YAAY,IAAIA,YAAY,CAACxH,IAAI,KAAK,MAAM,EAAE;IACnD,MAAMmL,cAAc,GAAGnD,QAAQ,CAAC4C,IAAI,CAACN,CAAC,IAAIA,CAAC,CAAC1O,EAAE,KAAK8O,MAAM,CAAC;IAC1D,IAAI,CAACS,cAAc,IAAIA,cAAc,CAACjP,WAAW,EAAE;MACjD2N,iBAAiB,CAAC,OAAO,EAAE,gCAAgC,CAAC;MAC5D;IACF;IAEA,IAAI,CAACxD,MAAM,CAACwE,OAAO,CAAC,wBAAwBM,cAAc,CAACtP,KAAK,4CAA4C,CAAC,EAAE;MAC7G,OAAO,CAAC;IACV;IAEAwM,gBAAgB,CAAC,IAAI,CAAC;IACtBI,mBAAmB,CAACiC,MAAM,CAAC;IAC3B,MAAM1N,eAAe,CAAC,MAAM;MAC1BiL,WAAW,CAACkC,SAAS,IACnBA,SAAS,CAACxJ,GAAG,CAACmC,IAAI,IAChBA,IAAI,CAAClH,EAAE,KAAK8O,MAAM,GAAG;QAAE,GAAG5H,IAAI;QAAE5G,WAAW,EAAE,IAAI;QAAED,UAAU,EAAE;MAAK,CAAC,GAAG6G,IAAI,CAAC;MAC/E,CACF,CAAC;MACD+G,iBAAiB,CAAC,SAAS,EAAE,uBAAuBsB,cAAc,CAACtP,KAAK,eAAe,CAAC;MACxF;MACA;IACF,CAAC,CAAC;IACFwM,gBAAgB,CAAC,KAAK,CAAC;IACvBI,mBAAmB,CAAC,IAAI,CAAC;EAC3B,CAAC,EAAE,CAACjB,YAAY,EAAEQ,QAAQ,CAAC,CAAC;;EAE5B;EACA,MAAMoD,aAAa,GAAGlQ,WAAW,CAAC,MAAMyN,gBAAgB,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;EACnE,MAAM0C,cAAc,GAAGnQ,WAAW,CAAC,MAAMyN,gBAAgB,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC;EAErE,MAAM2C,cAAc,GAAGpQ,WAAW,CAAE4H,IAAI,IAAK;IAC3CgG,aAAa,CAAChG,IAAI,CAAC;IACnB+F,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;EACN,MAAM0C,eAAe,GAAGrQ,WAAW,CAAC,MAAM;IACxC2N,iBAAiB,CAAC,KAAK,CAAC;IACxB;IACAxL,UAAU,CAAC,MAAMyL,aAAa,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC;EAC5C,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAM0C,YAAY,GAAGtQ,WAAW,CAAEuQ,KAAK,IAAK;IAC1CrK,aAAa,CAACqK,KAAK,CAAC;EACtB,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;EAER;EACA,MAAMC,gBAAgB,GAAGxQ,WAAW,CAAEyQ,UAAU,IAAK;IACnD;IACA,IAAIA,UAAU,IAAI,CAAC,IAAIA,UAAU,IAAItL,UAAU,EAAE;MAC/C4I,cAAc,CAAC0C,UAAU,CAAC;MAC1BtF,MAAM,CAACuF,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACzB;EACF,CAAC,EAAE,CAACvL,UAAU,CAAC,CAAC,CAAC,CAAC;;EAGlB;;EAEA;EACA,IAAI,CAACmH,YAAY,EAAE;IACjB,oBACEnM,OAAA,CAAAE,SAAA;MAAAkD,QAAA,gBACEpD,OAAA,CAACyG,SAAS;QACRC,OAAO,EAAE+H,WAAY;QACrB9H,aAAa,EAAEA,aAAc,CAAC;QAAA;QAC9BC,WAAW,EAAEA;MAAY;QAAA/C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B,CAAC,EAED0I,UAAU,iBACT1M,OAAA;QAAKmD,SAAS,EAAC,6BAA6B;QAAAC,QAAA,eAC1CpD,OAAA,CAACmE,YAAY;UAACC,IAAI,EAAC,OAAO;UAACC,OAAO,EAAEqI,UAAW;UAACpI,SAAS,EAAEA,CAAA,KAAMqC,aAAa,CAAC,EAAE;QAAE;UAAA9C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnF,CACN;IAAA,eACD,CAAC;EAEP;;EAEA;EACA,oBACEhE,OAAA;IAAKmD,SAAS,EAAC,qFAAqF;IAAAC,QAAA,gBAElGpD,OAAA,CAACkM,SAAS;MAACC,YAAY,EAAEA,YAAa;MAACC,QAAQ,EAAEwC;IAAa;MAAA/K,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAGhE+I,aAAa,IAAI,CAACW,kBAAkB,iBAAI1N,OAAA,CAACkD,cAAc;MAAAW,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAG3DhE,OAAA;MAAKmD,SAAS,EAAC,6BAA6B;MAAAC,QAAA,eAC1CpD,OAAA,CAACmE,YAAY;QACXC,IAAI,EAAE6I,aAAa,CAAC7I,IAAK;QACzBC,OAAO,EAAE4I,aAAa,CAACE,IAAK;QAC5B7I,SAAS,EAAEA,CAAA,KAAM4I,gBAAgB,CAAC;UAAE9I,IAAI,EAAE,EAAE;UAAE+I,IAAI,EAAE;QAAG,CAAC;MAAE;QAAAtJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3D;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAINhE,OAAA;MAAMmD,SAAS,EAAC,MAAM;MAAAC,QAAA,GAGnB+I,YAAY,CAACxH,IAAI,KAAK,OAAO,iBAC5B3E,OAAA;QAAKmD,SAAS,EAAC,qHAAqH;QAAAC,QAAA,gBAClIpD,OAAA;UAAImD,SAAS,EAAC,uCAAuC;UAAAC,QAAA,EAAC;QAAe;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC1EhE,OAAA;UACE4E,OAAO,EAAEmL,aAAc;UACvB5M,SAAS,EAAC,0IAA0I;UAAAC,QAAA,EACrJ;QAED;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CACN,eAGDhE,OAAA,CAAC0F,SAAS;QAACC,QAAQ,EAAEwK,YAAa;QAACvK,WAAW,EAAEuG,YAAY,CAACxH,IAAI,KAAK,OAAO,GAAG,mCAAmC,GAAG;MAA4B;QAAAd,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAIpJmI,YAAY,CAACxH,IAAI,KAAK,OAAO;MAAA;MAC5B;MACA3E,OAAA;QAAKmD,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBpD,OAAA,CAAC6I,aAAa;UACZC,KAAK,EAAEqF,cAAe,CAAC;UAAA;UACvBpF,MAAM,EAAEkH,cAAe;UACvBjH,QAAQ,EAAEoG,gBAAiB;UAC3BnG,gBAAgB,EAAEA;QAAiB;UAAApF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpC,CAAC,eACFhE,OAAA,CAAC8E,kBAAkB;UACjBC,WAAW,EAAEA,WAAY;UACzBC,UAAU,EAAEA,UAAW;UACvBC,YAAY,EAAEoL;QAAiB;UAAAxM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;MAAA;MAEN;MACAhE,OAAA,CAAAE,SAAA;QAAAkD,QAAA,gBACEpD,OAAA;UAAKmD,SAAS,EAAC,oFAAoF;UAAAC,QAAA,EAChG+K,cAAc,CAACjF,MAAM,GAAG,CAAC,GACxBiF,cAAc,CAAC7I,GAAG,CAACmC,IAAI,iBACrBzH,OAAA,CAACwH,QAAQ;YAEPC,IAAI,EAAEA,IAAK;YACXC,QAAQ,EAAEyE,YAAY,CAACxH,IAAK;YAC5BgD,eAAe,EAAEwE,YAAY,CAACrF,QAAS;YACvCc,QAAQ,EAAE6H,gBAAiB;YAC3B5H,QAAQ,EAAE8H,gBAAiB;YAC3B7H,UAAU,EAAE+H,kBAAmB;YAC/B9H,YAAY,EAAEkB,gBAAgB,KAAKxB,IAAI,CAAClH,EAAG,CAAC;UAAA,GAPvCkH,IAAI,CAAClH,EAAE;YAAAsD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAQb,CACF,CAAC,gBAEFhE,OAAA;YAAGmD,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EACxD0C,UAAU,GAAG,6BAA6B,GAAG;UAAmC;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChF;QACJ;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eACNhE,OAAA,CAAC8E,kBAAkB;UACjBC,WAAW,EAAEA,WAAY;UACzBC,UAAU,EAAEA,UAAW;UACvBC,YAAY,EAAEoL;QAAiB;UAAAxM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC;MAAA,eACF,CACH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC,eAGPhE,OAAA;MAAQmD,SAAS,EAAC,uEAAuE;MAAAC,QAAA,GAAC,iCACvD,EAAC,IAAIlB,IAAI,CAAC,CAAC,CAACsO,WAAW,CAAC,CAAC;IAAA;MAAA3M,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpD,CAAC,eAGThE,OAAA,CAACqL,aAAa;MACZV,MAAM,EAAE0C,aAAc;MACtBzC,OAAO,EAAEoF,cAAe;MACxB1E,SAAS,EAAEuD,aAAc;MACzBrF,YAAY,EAAEkE;IAAmB;MAAA7J,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CAAC,eACFhE,OAAA,CAAC4L,cAAc;MACbjB,MAAM,EAAE4C,cAAe;MACvB3C,OAAO,EAAEsF,eAAgB;MACzBrE,UAAU,EAAEsD,cAAe;MAC3BrD,UAAU,EAAEA,UAAW;MACvBtC,YAAY,EAAEkE;IAAmB;MAAA7J,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAACuI,GAAA,CA5aQD,GAAG;AAAAmE,IAAA,GAAHnE,GAAG;AA8aZ,eAAeA,GAAG;AAAC,IAAApI,EAAA,EAAAW,GAAA,EAAAY,GAAA,EAAAe,GAAA,EAAAe,GAAA,EAAAqB,GAAA,EAAAQ,GAAA,EAAAqB,GAAA,EAAAW,GAAA,EAAAO,IAAA,EAAAM,IAAA,EAAAI,IAAA,EAAAoE,IAAA;AAAAC,YAAA,CAAAxM,EAAA;AAAAwM,YAAA,CAAA7L,GAAA;AAAA6L,YAAA,CAAAjL,GAAA;AAAAiL,YAAA,CAAAlK,GAAA;AAAAkK,YAAA,CAAAnJ,GAAA;AAAAmJ,YAAA,CAAA9H,GAAA;AAAA8H,YAAA,CAAAtH,GAAA;AAAAsH,YAAA,CAAAjG,GAAA;AAAAiG,YAAA,CAAAtF,GAAA;AAAAsF,YAAA,CAAA/E,IAAA;AAAA+E,YAAA,CAAAzE,IAAA;AAAAyE,YAAA,CAAArE,IAAA;AAAAqE,YAAA,CAAAD,IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}